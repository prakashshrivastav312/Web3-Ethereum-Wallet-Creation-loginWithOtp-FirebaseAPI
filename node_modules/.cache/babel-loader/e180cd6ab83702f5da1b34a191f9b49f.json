{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EnumValue = exports.EnumVariantDefinition = exports.EnumType = void 0;\n\nconst utils_1 = require(\"../../utils\");\n\nconst types_1 = require(\"./types\");\n\nconst SimpleEnumMaxDiscriminant = 256;\n\nclass EnumType extends types_1.CustomType {\n  constructor(name, variants) {\n    super(name);\n    this.variants = [];\n    this.variants = variants;\n  }\n\n  static fromJSON(json) {\n    let variants = (json.variants || []).map(variant => EnumVariantDefinition.fromJSON(variant));\n    return new EnumType(json.name, variants);\n  }\n\n  getVariantByDiscriminant(discriminant) {\n    let result = this.variants.find(e => e.discriminant == discriminant);\n    utils_1.guardValueIsSet(\"result\", result);\n    return result;\n  }\n\n  getVariantByName(name) {\n    let result = this.variants.find(e => e.name == name);\n    utils_1.guardValueIsSet(\"result\", result);\n    return result;\n  }\n\n}\n\nexports.EnumType = EnumType;\n\nclass EnumVariantDefinition {\n  constructor(name, discriminant) {\n    utils_1.guardTrue(discriminant < SimpleEnumMaxDiscriminant, `discriminant for simple enum should be less than ${SimpleEnumMaxDiscriminant}`);\n    this.name = name;\n    this.discriminant = discriminant;\n  }\n\n  static fromJSON(json) {\n    return new EnumVariantDefinition(json.name, json.discriminant);\n  }\n\n}\n\nexports.EnumVariantDefinition = EnumVariantDefinition;\n\nclass EnumValue extends types_1.TypedValue {\n  constructor(type, variant) {\n    super(type);\n    this.name = variant.name;\n    this.discriminant = variant.discriminant;\n  }\n\n  static fromName(type, name) {\n    let variant = type.getVariantByName(name);\n    return new EnumValue(type, variant);\n  }\n\n  static fromDiscriminant(type, discriminant) {\n    let variant = type.getVariantByDiscriminant(discriminant);\n    return new EnumValue(type, variant);\n  }\n\n  equals(other) {\n    if (!this.getType().equals(other.getType())) {\n      return false;\n    }\n\n    return this.name == other.name && this.discriminant == other.discriminant;\n  }\n\n  valueOf() {\n    return this.name;\n  }\n\n}\n\nexports.EnumValue = EnumValue;","map":{"version":3,"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,yBAAyB,GAAG,GAAlC;;AAEA,MAAaC,QAAb,SAA8BC,kBAA9B,CAAwC;EAGpCC,YAAYC,IAAZ,EAA0BC,QAA1B,EAA2D;IACvD,MAAMD,IAAN;IAHK,gBAAoC,EAApC;IAIL,KAAKC,QAAL,GAAgBA,QAAhB;EACH;;EAEc,OAARC,QAAQ,CAACC,IAAD,EAAwC;IACnD,IAAIF,QAAQ,GAAG,CAACE,IAAI,CAACF,QAAL,IAAiB,EAAlB,EAAsBG,GAAtB,CAA0BC,OAAO,IAAIC,qBAAqB,CAACJ,QAAtB,CAA+BG,OAA/B,CAArC,CAAf;IACA,OAAO,IAAIR,QAAJ,CAAaM,IAAI,CAACH,IAAlB,EAAwBC,QAAxB,CAAP;EACH;;EAEDM,wBAAwB,CAACC,YAAD,EAAqB;IACzC,IAAIC,MAAM,GAAG,KAAKR,QAAL,CAAcS,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACH,YAAF,IAAkBA,YAA1C,CAAb;IACAI,wBAAgB,QAAhB,EAA0BH,MAA1B;IACA,OAAOA,MAAP;EACH;;EAEDI,gBAAgB,CAACb,IAAD,EAAa;IACzB,IAAIS,MAAM,GAAG,KAAKR,QAAL,CAAcS,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACX,IAAF,IAAUA,IAAlC,CAAb;IACAY,wBAAgB,QAAhB,EAA0BH,MAA1B;IACA,OAAOA,MAAP;EACH;;AAvBmC;;AAAxCK;;AA0BA,MAAaR,qBAAb,CAAkC;EAI9BP,YAAYC,IAAZ,EAA0BQ,YAA1B,EAA8C;IAC1CI,kBAAUJ,YAAY,GAAGZ,yBAAzB,EAAoD,oDAAoDA,yBAAyB,EAAjI;IAEA,KAAKI,IAAL,GAAYA,IAAZ;IACA,KAAKQ,YAAL,GAAoBA,YAApB;EACH;;EAEc,OAARN,QAAQ,CAACC,IAAD,EAA6C;IACxD,OAAO,IAAIG,qBAAJ,CAA0BH,IAAI,CAACH,IAA/B,EAAqCG,IAAI,CAACK,YAA1C,CAAP;EACH;;AAb6B;;AAAlCM;;AAgBA,MAAaC,SAAb,SAA+BjB,kBAA/B,CAAyC;EAIrCC,YAAoBiB,IAApB,EAAoCX,OAApC,EAAkE;IAC9D,MAAMW,IAAN;IACA,KAAKhB,IAAL,GAAYK,OAAO,CAACL,IAApB;IACA,KAAKQ,YAAL,GAAoBH,OAAO,CAACG,YAA5B;EACH;;EAEc,OAARS,QAAQ,CAACD,IAAD,EAAiBhB,IAAjB,EAA6B;IACxC,IAAIK,OAAO,GAAGW,IAAI,CAACH,gBAAL,CAAsBb,IAAtB,CAAd;IACA,OAAO,IAAIe,SAAJ,CAAcC,IAAd,EAAoBX,OAApB,CAAP;EACH;;EAEsB,OAAhBa,gBAAgB,CAACF,IAAD,EAAiBR,YAAjB,EAAqC;IACxD,IAAIH,OAAO,GAAGW,IAAI,CAACT,wBAAL,CAA8BC,YAA9B,CAAd;IACA,OAAO,IAAIO,SAAJ,CAAcC,IAAd,EAAoBX,OAApB,CAAP;EACH;;EAEDc,MAAM,CAACC,KAAD,EAAiB;IACnB,IAAI,CAAC,KAAKC,OAAL,GAAeF,MAAf,CAAsBC,KAAK,CAACC,OAAN,EAAtB,CAAL,EAA6C;MACzC,OAAO,KAAP;IACH;;IAED,OAAO,KAAKrB,IAAL,IAAaoB,KAAK,CAACpB,IAAnB,IAA2B,KAAKQ,YAAL,IAAqBY,KAAK,CAACZ,YAA7D;EACH;;EAEDc,OAAO;IACH,OAAO,KAAKtB,IAAZ;EACH;;AA9BoC;;AAAzCc","names":["SimpleEnumMaxDiscriminant","EnumType","types_1","constructor","name","variants","fromJSON","json","map","variant","EnumVariantDefinition","getVariantByDiscriminant","discriminant","result","find","e","utils_1","getVariantByName","exports","EnumValue","type","fromName","fromDiscriminant","equals","other","getType","valueOf"],"sourceRoot":"","sources":["../../../src/smartcontracts/typesystem/enum.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}