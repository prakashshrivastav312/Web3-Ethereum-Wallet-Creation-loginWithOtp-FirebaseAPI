{"ast":null,"code":"'use strict';\n\nvar _ = require('lodash');\n\nvar Base58 = require('./base58');\n\nvar buffer = require('buffer');\n\nvar sha256sha256 = require('../crypto/hash').sha256sha256;\n\nvar Base58Check = function Base58Check(obj) {\n  if (!(this instanceof Base58Check)) return new Base58Check(obj);\n\n  if (Buffer.isBuffer(obj)) {\n    var buf = obj;\n    this.fromBuffer(buf);\n  } else if (typeof obj === 'string') {\n    var str = obj;\n    this.fromString(str);\n  } else if (obj) {\n    this.set(obj);\n  }\n};\n\nBase58Check.prototype.set = function (obj) {\n  this.buf = obj.buf || this.buf || undefined;\n  return this;\n};\n\nBase58Check.validChecksum = function validChecksum(data, checksum) {\n  if (_.isString(data)) {\n    data = Buffer.from(Base58.decode(data));\n  }\n\n  if (_.isString(checksum)) {\n    checksum = Buffer.from(Base58.decode(checksum));\n  }\n\n  if (!checksum) {\n    checksum = data.slice(-4);\n    data = data.slice(0, -4);\n  }\n\n  return Base58Check.checksum(data).toString('hex') === checksum.toString('hex');\n};\n\nBase58Check.decode = function (s) {\n  if (typeof s !== 'string') throw new Error('Input must be a string');\n  var buf = Buffer.from(Base58.decode(s));\n  if (buf.length < 4) throw new Error(\"Input string too short\");\n  var data = buf.slice(0, -4);\n  var csum = buf.slice(-4);\n  var hash = sha256sha256(data);\n  var hash4 = hash.slice(0, 4);\n  if (csum.toString('hex') !== hash4.toString('hex')) throw new Error(\"Checksum mismatch\");\n  return data;\n};\n\nBase58Check.checksum = function (buffer) {\n  return sha256sha256(buffer).slice(0, 4);\n};\n\nBase58Check.encode = function (buf) {\n  if (!Buffer.isBuffer(buf)) throw new Error('Input must be a buffer');\n  var checkedBuf = Buffer.alloc(buf.length + 4);\n  var hash = Base58Check.checksum(buf);\n  buf.copy(checkedBuf);\n  hash.copy(checkedBuf, buf.length);\n  return Base58.encode(checkedBuf);\n};\n\nBase58Check.prototype.fromBuffer = function (buf) {\n  this.buf = buf;\n  return this;\n};\n\nBase58Check.prototype.fromString = function (str) {\n  var buf = Base58Check.decode(str);\n  this.buf = buf;\n  return this;\n};\n\nBase58Check.prototype.toBuffer = function () {\n  return this.buf;\n};\n\nBase58Check.prototype.toString = function () {\n  return Base58Check.encode(this.buf);\n};\n\nmodule.exports = Base58Check;","map":{"version":3,"names":["_","require","Base58","buffer","sha256sha256","Base58Check","obj","Buffer","isBuffer","buf","fromBuffer","str","fromString","set","prototype","undefined","validChecksum","data","checksum","isString","from","decode","slice","toString","s","Error","length","csum","hash","hash4","encode","checkedBuf","alloc","copy","toBuffer","module","exports"],"sources":["C:/Users/acer/node_modules/bitcore-lib/lib/encoding/base58check.js"],"sourcesContent":["'use strict';\n\nvar _ = require('lodash');\nvar Base58 = require('./base58');\nvar buffer = require('buffer');\nvar sha256sha256 = require('../crypto/hash').sha256sha256;\n\nvar Base58Check = function Base58Check(obj) {\n  if (!(this instanceof Base58Check))\n    return new Base58Check(obj);\n  if (Buffer.isBuffer(obj)) {\n    var buf = obj;\n    this.fromBuffer(buf);\n  } else if (typeof obj === 'string') {\n    var str = obj;\n    this.fromString(str);\n  } else if (obj) {\n    this.set(obj);\n  }\n};\n\nBase58Check.prototype.set = function(obj) {\n  this.buf = obj.buf || this.buf || undefined;\n  return this;\n};\n\nBase58Check.validChecksum = function validChecksum(data, checksum) {\n  if (_.isString(data)) {\n    data = Buffer.from(Base58.decode(data));\n  }\n  if (_.isString(checksum)) {\n    checksum =  Buffer.from(Base58.decode(checksum));\n  }\n  if (!checksum) {\n    checksum = data.slice(-4);\n    data = data.slice(0, -4);\n  }\n  return Base58Check.checksum(data).toString('hex') === checksum.toString('hex');\n};\n\nBase58Check.decode = function(s) {\n  if (typeof s !== 'string')\n    throw new Error('Input must be a string');\n\n  var buf = Buffer.from(Base58.decode(s));\n\n  if (buf.length < 4)\n    throw new Error(\"Input string too short\");\n\n  var data = buf.slice(0, -4);\n  var csum = buf.slice(-4);\n\n  var hash = sha256sha256(data);\n  var hash4 = hash.slice(0, 4);\n\n  if (csum.toString('hex') !== hash4.toString('hex'))\n    throw new Error(\"Checksum mismatch\");\n\n  return data;\n};\n\nBase58Check.checksum = function(buffer) {\n  return sha256sha256(buffer).slice(0, 4);\n};\n\nBase58Check.encode = function(buf) {\n  if (!Buffer.isBuffer(buf))\n    throw new Error('Input must be a buffer');\n  var checkedBuf = Buffer.alloc(buf.length + 4);\n  var hash = Base58Check.checksum(buf);\n  buf.copy(checkedBuf);\n  hash.copy(checkedBuf, buf.length);\n  return Base58.encode(checkedBuf);\n};\n\nBase58Check.prototype.fromBuffer = function(buf) {\n  this.buf = buf;\n  return this;\n};\n\nBase58Check.prototype.fromString = function(str) {\n  var buf = Base58Check.decode(str);\n  this.buf = buf;\n  return this;\n};\n\nBase58Check.prototype.toBuffer = function() {\n  return this.buf;\n};\n\nBase58Check.prototype.toString = function() {\n  return Base58Check.encode(this.buf);\n};\n\nmodule.exports = Base58Check;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}