{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = __importStar(require(\"./utils\"));\n\nconst common_1 = require(\"../common\");\n\nfunction isImmediateRejection(engineResult) {\n  return engineResult.startsWith('tem');\n}\n\nfunction formatSubmitResponse(response) {\n  const data = {\n    resultCode: response.engine_result,\n    resultMessage: response.engine_result_message,\n    engine_result: response.engine_result,\n    engine_result_code: response.engine_result_code,\n    engine_result_message: response.engine_result_message,\n    tx_blob: response.tx_blob,\n    tx_json: response.tx_json\n  };\n\n  if (isImmediateRejection(response.engine_result)) {\n    throw new utils.common.errors.RippledError('Submit failed', data);\n  }\n\n  return data;\n}\n\nfunction submit(signedTransaction, failHard) {\n  return __awaiter(this, void 0, void 0, function* () {\n    common_1.validate.submit({\n      signedTransaction\n    });\n    const response = yield this.request('submit', Object.assign({\n      tx_blob: signedTransaction\n    }, failHard ? {\n      fail_hard: failHard\n    } : {}));\n    return formatSubmitResponse(response);\n  });\n}\n\nexports.default = submit;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;;AACA;;AAQA,SAASA,oBAAT,CAA8BC,YAA9B,EAAkD;EAOhD,OAAOA,YAAY,CAACC,UAAb,CAAwB,KAAxB,CAAP;AACD;;AAED,SAASC,oBAAT,CAA8BC,QAA9B,EAAsC;EACpC,MAAMC,IAAI,GAAG;IAEXC,UAAU,EAAEF,QAAQ,CAACG,aAFV;IAIXC,aAAa,EAAEJ,QAAQ,CAACK,qBAJb;IAKXF,aAAa,EAAEH,QAAQ,CAACG,aALb;IAMXG,kBAAkB,EAAEN,QAAQ,CAACM,kBANlB;IAOXD,qBAAqB,EAAEL,QAAQ,CAACK,qBAPrB;IAQXE,OAAO,EAAEP,QAAQ,CAACO,OARP;IASXC,OAAO,EAAER,QAAQ,CAACQ;EATP,CAAb;;EAWA,IAAIZ,oBAAoB,CAACI,QAAQ,CAACG,aAAV,CAAxB,EAAkD;IAChD,MAAM,IAAIM,KAAK,CAACC,MAAN,CAAaC,MAAb,CAAoBC,YAAxB,CAAqC,eAArC,EAAsDX,IAAtD,CAAN;EACD;;EACD,OAAOA,IAAP;AACD;;AAGD,SAAeY,MAAf,CAEEC,iBAFF,EAGEC,QAHF,EAGoB;;IAGlBC,kBAASH,MAAT,CAAgB;MAACC;IAAD,CAAhB;IAEA,MAAMd,QAAQ,GAAG,MAAM,KAAKiB,OAAL,CAAa,QAAb,EAAqBC;MAC1CX,OAAO,EAAEO;IADiC,GAEtCC,QAAQ,GAAG;MAACI,SAAS,EAAEJ;IAAZ,CAAH,GAA2B,EAFG,CAArB,CAAvB;IAKA,OAAOhB,oBAAoB,CAACC,QAAD,CAA3B;EACD;AAAA;;AAEDoB,kBAAeP,MAAf","names":["isImmediateRejection","engineResult","startsWith","formatSubmitResponse","response","data","resultCode","engine_result","resultMessage","engine_result_message","engine_result_code","tx_blob","tx_json","utils","common","errors","RippledError","submit","signedTransaction","failHard","common_1","request","Object","fail_hard","exports"],"sourceRoot":"","sources":["../../../src/transaction/submit.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}