{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VarInt = exports.UVarInt = void 0;\n\nvar _bn = _interopRequireDefault(require(\"bn.js\"));\n\nfunction VarIntFunc(signed) {\n  var encodingLength = function encodingLength(n) {\n    if (signed) n *= 2;\n\n    if (n < 0) {\n      throw Error(\"varint value is out of bounds\");\n    }\n\n    var bits = Math.log2(n + 1);\n    return Math.ceil(bits / 7) || 1;\n  };\n\n  var encode = function encode(n, buffer, offset) {\n    if (n < 0) {\n      throw Error(\"varint value is out of bounds\");\n    }\n\n    buffer = buffer || Buffer.alloc(encodingLength(n));\n    offset = offset || 0;\n    var nStr = n.toString();\n    var bn = new _bn[\"default\"](nStr, 10);\n    var num255 = new _bn[\"default\"](0xff);\n    var num128 = new _bn[\"default\"](0x80); // amino signed varint is multiplied by 2\n\n    if (signed) {\n      bn = bn.muln(2);\n    }\n\n    var i = 0;\n\n    while (bn.gten(0x80)) {\n      buffer[offset + i] = bn.and(num255).or(num128).toNumber();\n      bn = bn.shrn(7);\n      i++;\n    }\n\n    buffer[offset + i] = bn.andln(0xff); // TODO\n    // encode.bytes = i + 1\n\n    return buffer;\n  };\n  /**\n   * https://github.com/golang/go/blob/master/src/encoding/binary/varint.go#L60\n   */\n\n\n  var decode = function decode(bytes) {\n    var x = 0;\n    var s = 0;\n\n    for (var i = 0, len = bytes.length; i < len; i++) {\n      var b = bytes[i];\n\n      if (b < 0x80) {\n        if (i > 9 || i === 9 && b > 1) {\n          return 0;\n        }\n\n        return x | b << s;\n      }\n\n      x |= (b & 0x7f) << s;\n      s += 7;\n    }\n\n    return 0;\n  };\n\n  return {\n    encode: encode,\n    decode: decode,\n    encodingLength: encodingLength\n  };\n}\n\nvar UVarInt = VarIntFunc(false);\nexports.UVarInt = UVarInt;\nvar VarInt = VarIntFunc(true);\nexports.VarInt = VarInt;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","VarInt","UVarInt","_bn","VarIntFunc","signed","encodingLength","n","Error","bits","Math","log2","ceil","encode","buffer","offset","Buffer","alloc","nStr","toString","bn","num255","num128","muln","i","gten","and","or","toNumber","shrn","andln","decode","bytes","x","s","len","length","b"],"sources":["C:/Users/acer/node_modules/@binance-chain/javascript-sdk/lib/amino/encoder/varint.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VarInt = exports.UVarInt = void 0;\n\nvar _bn = _interopRequireDefault(require(\"bn.js\"));\n\nfunction VarIntFunc(signed) {\n  var encodingLength = function encodingLength(n) {\n    if (signed) n *= 2;\n\n    if (n < 0) {\n      throw Error(\"varint value is out of bounds\");\n    }\n\n    var bits = Math.log2(n + 1);\n    return Math.ceil(bits / 7) || 1;\n  };\n\n  var encode = function encode(n, buffer, offset) {\n    if (n < 0) {\n      throw Error(\"varint value is out of bounds\");\n    }\n\n    buffer = buffer || Buffer.alloc(encodingLength(n));\n    offset = offset || 0;\n    var nStr = n.toString();\n    var bn = new _bn[\"default\"](nStr, 10);\n    var num255 = new _bn[\"default\"](0xff);\n    var num128 = new _bn[\"default\"](0x80); // amino signed varint is multiplied by 2\n\n    if (signed) {\n      bn = bn.muln(2);\n    }\n\n    var i = 0;\n\n    while (bn.gten(0x80)) {\n      buffer[offset + i] = bn.and(num255).or(num128).toNumber();\n      bn = bn.shrn(7);\n      i++;\n    }\n\n    buffer[offset + i] = bn.andln(0xff); // TODO\n    // encode.bytes = i + 1\n\n    return buffer;\n  };\n  /**\n   * https://github.com/golang/go/blob/master/src/encoding/binary/varint.go#L60\n   */\n\n\n  var decode = function decode(bytes) {\n    var x = 0;\n    var s = 0;\n\n    for (var i = 0, len = bytes.length; i < len; i++) {\n      var b = bytes[i];\n\n      if (b < 0x80) {\n        if (i > 9 || i === 9 && b > 1) {\n          return 0;\n        }\n\n        return x | b << s;\n      }\n\n      x |= (b & 0x7f) << s;\n      s += 7;\n    }\n\n    return 0;\n  };\n\n  return {\n    encode: encode,\n    decode: decode,\n    encodingLength: encodingLength\n  };\n}\n\nvar UVarInt = VarIntFunc(false);\nexports.UVarInt = UVarInt;\nvar VarInt = VarIntFunc(true);\nexports.VarInt = VarInt;"],"mappings":"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"},"metadata":{},"sourceType":"script"}