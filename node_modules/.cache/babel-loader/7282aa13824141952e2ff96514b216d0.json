{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Egld = exports.createBalanceBuilder = void 0;\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst _1 = require(\".\");\n\nconst errors_1 = require(\"./errors\");\n\nconst token_1 = require(\"./token\");\n\nclass BalanceBuilderImpl {\n  constructor(token) {\n    this.token = token;\n    this.nonce_ = null;\n\n    if (token.isFungible()) {\n      this.setNonce(0);\n    }\n  }\n\n  value(value) {\n    value = applyDenomination(value, this.token.decimals);\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  raw(value) {\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  nonce(nonce) {\n    let builder = createBalanceBuilder(this.token);\n    builder.setNonce(nonce);\n    return builder;\n  }\n\n  setNonce(nonce) {\n    this.nonce_ = new bignumber_js_1.default(nonce);\n  }\n\n  one() {\n    return this.value(1);\n  }\n\n  hasNonce() {\n    return this.token.isFungible() || this.nonce_ != null;\n  }\n\n  getNonce() {\n    if (this.nonce_ == null) {\n      throw new _1.ErrInvariantFailed(\"Nonce was not provided\");\n    }\n\n    return new bignumber_js_1.default(this.nonce_);\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  getTokenIdentifier() {\n    return this.getToken().getTokenIdentifier();\n  }\n\n}\n\nfunction createBalanceBuilder(token) {\n  let impl = new BalanceBuilderImpl(token);\n  let denominated = impl.value.bind(impl);\n  let others = {\n    value: impl.value.bind(impl),\n    raw: impl.raw.bind(impl),\n    nonce: impl.nonce.bind(impl),\n    setNonce: impl.setNonce.bind(impl),\n    one: impl.one.bind(impl),\n    hasNonce: impl.hasNonce.bind(impl),\n    getNonce: impl.getNonce.bind(impl),\n    getToken: impl.getToken.bind(impl),\n    getTokenIdentifier: impl.getTokenIdentifier.bind(impl)\n  };\n  return Object.assign(denominated, others);\n}\n\nexports.createBalanceBuilder = createBalanceBuilder;\n/**\n * Builder for an EGLD value.\n */\n\nexports.Egld = createBalanceBuilder(new token_1.Token({\n  identifier: \"EGLD\",\n  name: \"eGold\",\n  decimals: 18,\n  type: token_1.TokenType.Fungible\n}));\n\nfunction applyDenomination(value, decimals) {\n  if (decimals < 0) {\n    throw new errors_1.ErrInvalidArgument(\"The number of decimals must be positive\");\n  }\n\n  return new bignumber_js_1.default(value).shiftedBy(decimals).decimalPlaces(0);\n}","map":{"version":3,"mappings":"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","names":["BalanceBuilderImpl","constructor","token","nonce_","isFungible","setNonce","value","applyDenomination","decimals","_1","getNonce","raw","nonce","builder","createBalanceBuilder","bignumber_js_1","one","hasNonce","getToken","getTokenIdentifier","impl","denominated","bind","others","Object","assign","exports","token_1","identifier","name","type","Fungible","errors_1","shiftedBy","decimalPlaces"],"sourceRoot":"","sources":["../src/balanceBuilder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}