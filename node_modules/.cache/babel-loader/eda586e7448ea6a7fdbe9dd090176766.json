{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst assert = __importStar(require(\"assert\"));\n\nconst utils_1 = require(\"./utils\");\n\nconst utils_2 = require(\"./utils\");\n\nconst amount_1 = __importDefault(require(\"./amount\"));\n\nconst common_1 = require(\"../../common\");\n\nconst flags = common_1.txFlags.OfferCreate;\n\nfunction parseOrder(tx) {\n  assert.ok(tx.TransactionType === 'OfferCreate');\n  const direction = (tx.Flags & flags.Sell) === 0 ? 'buy' : 'sell';\n  const takerGetsAmount = amount_1.default(tx.TakerGets);\n  const takerPaysAmount = amount_1.default(tx.TakerPays);\n  const quantity = direction === 'buy' ? takerPaysAmount : takerGetsAmount;\n  const totalPrice = direction === 'buy' ? takerGetsAmount : takerPaysAmount;\n  return common_1.removeUndefined({\n    memos: utils_2.parseMemos(tx),\n    direction: direction,\n    quantity: quantity,\n    totalPrice: totalPrice,\n    passive: (tx.Flags & flags.Passive) !== 0 || undefined,\n    immediateOrCancel: (tx.Flags & flags.ImmediateOrCancel) !== 0 || undefined,\n    fillOrKill: (tx.Flags & flags.FillOrKill) !== 0 || undefined,\n    expirationTime: utils_1.parseTimestamp(tx.Expiration)\n  });\n}\n\nexports.default = parseOrder;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAMA,MAAMA,KAAK,GAAGC,iBAAQC,WAAtB;;AAEA,SAASC,UAAT,CAAoBC,EAApB,EAA8C;EAC5CC,MAAM,CAACC,EAAP,CAAUF,EAAE,CAACG,eAAH,KAAuB,aAAjC;EAEA,MAAMC,SAAS,GAAG,CAACJ,EAAE,CAACK,KAAH,GAAWT,KAAK,CAACU,IAAlB,MAA4B,CAA5B,GAAgC,KAAhC,GAAwC,MAA1D;EACA,MAAMC,eAAe,GAAGC,iBAAYR,EAAE,CAACS,SAAf,CAAxB;EACA,MAAMC,eAAe,GAAGF,iBAAYR,EAAE,CAACW,SAAf,CAAxB;EACA,MAAMC,QAAQ,GAAGR,SAAS,KAAK,KAAd,GAAsBM,eAAtB,GAAwCH,eAAzD;EACA,MAAMM,UAAU,GAAGT,SAAS,KAAK,KAAd,GAAsBG,eAAtB,GAAwCG,eAA3D;EAEA,OAAOb,yBAAgB;IACrBiB,KAAK,EAAEC,mBAAWf,EAAX,CADc;IAErBI,SAAS,EAAEA,SAFU;IAGrBQ,QAAQ,EAAEA,QAHW;IAIrBC,UAAU,EAAEA,UAJS;IAKrBG,OAAO,EAAE,CAAChB,EAAE,CAACK,KAAH,GAAWT,KAAK,CAACqB,OAAlB,MAA+B,CAA/B,IAAoCC,SALxB;IAMrBC,iBAAiB,EAAE,CAACnB,EAAE,CAACK,KAAH,GAAWT,KAAK,CAACwB,iBAAlB,MAAyC,CAAzC,IAA8CF,SAN5C;IAOrBG,UAAU,EAAE,CAACrB,EAAE,CAACK,KAAH,GAAWT,KAAK,CAAC0B,UAAlB,MAAkC,CAAlC,IAAuCJ,SAP9B;IAQrBK,cAAc,EAAEC,uBAAexB,EAAE,CAACyB,UAAlB;EARK,CAAhB,CAAP;AAUD;;AAEDC,kBAAe3B,UAAf","names":["flags","common_1","OfferCreate","parseOrder","tx","assert","ok","TransactionType","direction","Flags","Sell","takerGetsAmount","amount_1","TakerGets","takerPaysAmount","TakerPays","quantity","totalPrice","memos","utils_2","passive","Passive","undefined","immediateOrCancel","ImmediateOrCancel","fillOrKill","FillOrKill","expirationTime","utils_1","Expiration","exports"],"sourceRoot":"","sources":["../../../../src/ledger/parse/order.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}