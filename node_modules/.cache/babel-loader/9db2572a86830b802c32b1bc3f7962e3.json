{"ast":null,"code":"'use strict';\n\nconst CID = require('cids');\n\nconst uint8ArrayEquals = require('uint8arrays/equals');\n\nconst rmLink = (dagNode, nameOrCid) => {\n  let predicate = null; // It's a name\n\n  if (typeof nameOrCid === 'string') {\n    predicate = link => link.Name === nameOrCid;\n  } else if (nameOrCid instanceof Uint8Array || CID.isCID(nameOrCid)) {\n    predicate = link => uint8ArrayEquals(link.Hash, nameOrCid);\n  }\n\n  if (predicate) {\n    const links = dagNode.Links;\n    let index = 0;\n\n    while (index < links.length) {\n      const link = links[index];\n\n      if (predicate(link)) {\n        links.splice(index, 1);\n      } else {\n        index++;\n      }\n    }\n  } else {\n    throw new Error('second arg needs to be a name or CID');\n  }\n};\n\nmodule.exports = rmLink;","map":{"version":3,"names":["CID","require","uint8ArrayEquals","rmLink","dagNode","nameOrCid","predicate","link","Name","Uint8Array","isCID","Hash","links","Links","index","length","splice","Error","module","exports"],"sources":["C:/Users/acer/node_modules/ipld-dag-pb/src/dag-node/rmLink.js"],"sourcesContent":["'use strict'\n\nconst CID = require('cids')\nconst uint8ArrayEquals = require('uint8arrays/equals')\n\nconst rmLink = (dagNode, nameOrCid) => {\n  let predicate = null\n\n  // It's a name\n  if (typeof nameOrCid === 'string') {\n    predicate = (link) => link.Name === nameOrCid\n  } else if (nameOrCid instanceof Uint8Array || CID.isCID(nameOrCid)) {\n    predicate = (link) => uint8ArrayEquals(link.Hash, nameOrCid)\n  }\n\n  if (predicate) {\n    const links = dagNode.Links\n    let index = 0\n    while (index < links.length) {\n      const link = links[index]\n      if (predicate(link)) {\n        links.splice(index, 1)\n      } else {\n        index++\n      }\n    }\n  } else {\n    throw new Error('second arg needs to be a name or CID')\n  }\n}\n\nmodule.exports = rmLink\n"],"mappings":"AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,oBAAD,CAAhC;;AAEA,MAAME,MAAM,GAAG,CAACC,OAAD,EAAUC,SAAV,KAAwB;EACrC,IAAIC,SAAS,GAAG,IAAhB,CADqC,CAGrC;;EACA,IAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC;IACjCC,SAAS,GAAIC,IAAD,IAAUA,IAAI,CAACC,IAAL,KAAcH,SAApC;EACD,CAFD,MAEO,IAAIA,SAAS,YAAYI,UAArB,IAAmCT,GAAG,CAACU,KAAJ,CAAUL,SAAV,CAAvC,EAA6D;IAClEC,SAAS,GAAIC,IAAD,IAAUL,gBAAgB,CAACK,IAAI,CAACI,IAAN,EAAYN,SAAZ,CAAtC;EACD;;EAED,IAAIC,SAAJ,EAAe;IACb,MAAMM,KAAK,GAAGR,OAAO,CAACS,KAAtB;IACA,IAAIC,KAAK,GAAG,CAAZ;;IACA,OAAOA,KAAK,GAAGF,KAAK,CAACG,MAArB,EAA6B;MAC3B,MAAMR,IAAI,GAAGK,KAAK,CAACE,KAAD,CAAlB;;MACA,IAAIR,SAAS,CAACC,IAAD,CAAb,EAAqB;QACnBK,KAAK,CAACI,MAAN,CAAaF,KAAb,EAAoB,CAApB;MACD,CAFD,MAEO;QACLA,KAAK;MACN;IACF;EACF,CAXD,MAWO;IACL,MAAM,IAAIG,KAAJ,CAAU,sCAAV,CAAN;EACD;AACF,CAxBD;;AA0BAC,MAAM,CAACC,OAAP,GAAiBhB,MAAjB"},"metadata":{},"sourceType":"script"}