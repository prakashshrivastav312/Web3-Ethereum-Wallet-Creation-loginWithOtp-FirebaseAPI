{"ast":null,"code":"import { ValidationMetadata } from '../../metadata/ValidationMetadata';\nimport { getMetadataStorage } from '../../metadata/MetadataStorage';\nimport { ValidationTypes } from '../../validation/ValidationTypes';\nimport { ConstraintMetadata } from '../../metadata/ConstraintMetadata';\n/**\n * Registers custom validator class.\n */\n\nexport function ValidatorConstraint(options) {\n  return function (target) {\n    var isAsync = options && options.async;\n    var name = options && options.name ? options.name : '';\n\n    if (!name) {\n      name = target.name;\n      if (!name) // generate name if it was not given\n        name = name.replace(/\\.?([A-Z]+)/g, function (x, y) {\n          return '_' + y.toLowerCase();\n        }).replace(/^_/, '');\n    }\n\n    var metadata = new ConstraintMetadata(target, name, isAsync);\n    getMetadataStorage().addConstraintMetadata(metadata);\n  };\n}\nexport function Validate(constraintClass, constraintsOrValidationOptions, maybeValidationOptions) {\n  return function (object, propertyName) {\n    var args = {\n      type: ValidationTypes.CUSTOM_VALIDATION,\n      target: object.constructor,\n      propertyName: propertyName,\n      constraintCls: constraintClass,\n      constraints: constraintsOrValidationOptions instanceof Array ? constraintsOrValidationOptions : undefined,\n      validationOptions: !(constraintsOrValidationOptions instanceof Array) ? constraintsOrValidationOptions : maybeValidationOptions\n    };\n    getMetadataStorage().addValidationMetadata(new ValidationMetadata(args));\n  };\n}","map":{"version":3,"mappings":"AAEA,SAASA,kBAAT,QAAmC,mCAAnC;AACA,SAASC,kBAAT,QAAmC,gCAAnC;AACA,SAASC,eAAT,QAAgC,kCAAhC;AACA,SAASC,kBAAT,QAAmC,mCAAnC;AAEA;;;;AAGA,OAAM,SAAUC,mBAAV,CAA8BC,OAA9B,EAA0E;EAC9E,OAAO,UAAUC,MAAV,EAA0B;IAC/B,IAAMC,OAAO,GAAGF,OAAO,IAAIA,OAAO,CAACG,KAAnC;IACA,IAAIC,IAAI,GAAGJ,OAAO,IAAIA,OAAO,CAACI,IAAnB,GAA0BJ,OAAO,CAACI,IAAlC,GAAyC,EAApD;;IACA,IAAI,CAACA,IAAL,EAAW;MACTA,IAAI,GAAIH,MAAc,CAACG,IAAvB;MACA,IAAI,CAACA,IAAL,EACE;QACAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,cAAb,EAA6B,UAACC,CAAD,EAAIC,CAAJ,EAAK;UAAK,aAAOA,CAAY,CAACC,WAAb,EAAP;QAAiC,CAAxE,EAA0EH,OAA1E,CAAkF,IAAlF,EAAwF,EAAxF,CAAP;IACH;;IACD,IAAMI,QAAQ,GAAG,IAAIX,kBAAJ,CAAuBG,MAAvB,EAA+BG,IAA/B,EAAqCF,OAArC,CAAjB;IACAN,kBAAkB,GAAGc,qBAArB,CAA2CD,QAA3C;EACD,CAXD;AAYD;AAYD,OAAM,SAAUE,QAAV,CACJC,eADI,EAEJC,8BAFI,EAGJC,sBAHI,EAGsC;EAE1C,OAAO,UAAUC,MAAV,EAA0BC,YAA1B,EAA8C;IACnD,IAAMC,IAAI,GAA2B;MACnCC,IAAI,EAAErB,eAAe,CAACsB,iBADa;MAEnClB,MAAM,EAAEc,MAAM,CAACK,WAFoB;MAGnCJ,YAAY,EAAEA,YAHqB;MAInCK,aAAa,EAAET,eAJoB;MAKnCU,WAAW,EAAET,8BAA8B,YAAYU,KAA1C,GAAkDV,8BAAlD,GAAmFW,SAL7D;MAMnCC,iBAAiB,EAAE,EAAEZ,8BAA8B,YAAYU,KAA5C,IACfV,8BADe,GAEfC;IAR+B,CAArC;IAUAlB,kBAAkB,GAAG8B,qBAArB,CAA2C,IAAI/B,kBAAJ,CAAuBsB,IAAvB,CAA3C;EACD,CAZD;AAaD","names":["ValidationMetadata","getMetadataStorage","ValidationTypes","ConstraintMetadata","ValidatorConstraint","options","target","isAsync","async","name","replace","x","y","toLowerCase","metadata","addConstraintMetadata","Validate","constraintClass","constraintsOrValidationOptions","maybeValidationOptions","object","propertyName","args","type","CUSTOM_VALIDATION","constructor","constraintCls","constraints","Array","undefined","validationOptions","addValidationMetadata"],"sourceRoot":"","sources":["../../../../src/decorator/common/Validate.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}