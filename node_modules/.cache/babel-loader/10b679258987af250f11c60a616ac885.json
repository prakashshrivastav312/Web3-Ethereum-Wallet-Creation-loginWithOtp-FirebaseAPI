{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0) throw new Error('Non-minimally encoded script number');\n    }\n  } // 40-bit\n\n\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  } // 32-bit / 24-bit / 16-bit / 8-bit\n\n\n  let result = 0;\n\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << 8 * i;\n  }\n\n  if (buffer[length - 1] & 0x80) return -(result & ~(0x80 << 8 * (length - 1)));\n  return result;\n}\n\nexports.decode = decode;\n\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff ? 5 : i > 0x7fffff ? 4 : i > 0x7fff ? 3 : i > 0x7f ? 2 : i > 0x00 ? 1 : 0;\n}\n\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n\n  return buffer;\n}\n\nexports.encode = encode;","map":{"version":3,"names":["Object","defineProperty","exports","value","decode","buffer","maxLength","minimal","undefined","length","TypeError","Error","a","readUInt32LE","b","readUInt8","result","i","scriptNumSize","encode","_number","Math","abs","size","Buffer","allocUnsafe","negative","writeUInt8"],"sources":["C:/Users/acer/node_modules/bitcoinjs-lib/src/script_number.js"],"sourcesContent":["'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}