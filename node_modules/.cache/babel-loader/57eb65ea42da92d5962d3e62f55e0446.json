{"ast":null,"code":"var assert = require('nanoassert');\n\nvar wasm = require('./blake2b')();\n\nvar head = 64;\nvar freeList = [];\nmodule.exports = Blake2b;\nvar BYTES_MIN = module.exports.BYTES_MIN = 16;\nvar BYTES_MAX = module.exports.BYTES_MAX = 64;\nvar BYTES = module.exports.BYTES = 32;\nvar KEYBYTES_MIN = module.exports.KEYBYTES_MIN = 16;\nvar KEYBYTES_MAX = module.exports.KEYBYTES_MAX = 64;\nvar KEYBYTES = module.exports.KEYBYTES = 32;\nvar SALTBYTES = module.exports.SALTBYTES = 16;\nvar PERSONALBYTES = module.exports.PERSONALBYTES = 16;\n\nfunction Blake2b(digestLength, key, salt, personal, noAssert) {\n  if (!(this instanceof Blake2b)) return new Blake2b(digestLength, key, salt, personal, noAssert);\n  if (!(wasm && wasm.exports)) throw new Error('WASM not loaded. Wait for Blake2b.ready(cb)');\n  if (!digestLength) digestLength = 32;\n\n  if (noAssert !== true) {\n    assert(digestLength >= BYTES_MIN, 'digestLength must be at least ' + BYTES_MIN + ', was given ' + digestLength);\n    assert(digestLength <= BYTES_MAX, 'digestLength must be at most ' + BYTES_MAX + ', was given ' + digestLength);\n    if (key != null) assert(key.length >= KEYBYTES_MIN, 'key must be at least ' + KEYBYTES_MIN + ', was given ' + key.length);\n    if (key != null) assert(key.length <= KEYBYTES_MAX, 'key must be at least ' + KEYBYTES_MAX + ', was given ' + key.length);\n    if (salt != null) assert(salt.length === SALTBYTES, 'salt must be exactly ' + SALTBYTES + ', was given ' + salt.length);\n    if (personal != null) assert(personal.length === PERSONALBYTES, 'personal must be exactly ' + PERSONALBYTES + ', was given ' + personal.length);\n  }\n\n  if (!freeList.length) {\n    freeList.push(head);\n    head += 216;\n  }\n\n  this.digestLength = digestLength;\n  this.finalized = false;\n  this.pointer = freeList.pop();\n  wasm.memory.fill(0, 0, 64);\n  wasm.memory[0] = this.digestLength;\n  wasm.memory[1] = key ? key.length : 0;\n  wasm.memory[2] = 1; // fanout\n\n  wasm.memory[3] = 1; // depth\n\n  if (salt) wasm.memory.set(salt, 32);\n  if (personal) wasm.memory.set(personal, 48);\n  if (this.pointer + 216 > wasm.memory.length) wasm.realloc(this.pointer + 216); // we need 216 bytes for the state\n\n  wasm.exports.blake2b_init(this.pointer, this.digestLength);\n\n  if (key) {\n    this.update(key);\n    wasm.memory.fill(0, head, head + key.length); // whiteout key\n\n    wasm.memory[this.pointer + 200] = 128;\n  }\n}\n\nBlake2b.prototype.update = function (input) {\n  assert(this.finalized === false, 'Hash instance finalized');\n  assert(input, 'input must be TypedArray or Buffer');\n  if (head + input.length > wasm.memory.length) wasm.realloc(head + input.length);\n  wasm.memory.set(input, head);\n  wasm.exports.blake2b_update(this.pointer, head, head + input.length);\n  return this;\n};\n\nBlake2b.prototype.digest = function (enc) {\n  assert(this.finalized === false, 'Hash instance finalized');\n  this.finalized = true;\n  freeList.push(this.pointer);\n  wasm.exports.blake2b_final(this.pointer);\n\n  if (!enc || enc === 'binary') {\n    return wasm.memory.slice(this.pointer + 128, this.pointer + 128 + this.digestLength);\n  }\n\n  if (enc === 'hex') {\n    return hexSlice(wasm.memory, this.pointer + 128, this.digestLength);\n  }\n\n  assert(enc.length >= this.digestLength, 'input must be TypedArray or Buffer');\n\n  for (var i = 0; i < this.digestLength; i++) {\n    enc[i] = wasm.memory[this.pointer + 128 + i];\n  }\n\n  return enc;\n}; // libsodium compat\n\n\nBlake2b.prototype.final = Blake2b.prototype.digest;\nBlake2b.WASM = wasm && wasm.buffer;\nBlake2b.SUPPORTED = typeof WebAssembly !== 'undefined';\n\nBlake2b.ready = function (cb) {\n  if (!cb) cb = noop;\n  if (!wasm) return cb(new Error('WebAssembly not supported')); // backwards compat, can be removed in a new major\n\n  var p = new Promise(function (reject, resolve) {\n    wasm.onload(function (err) {\n      if (err) resolve();else reject();\n      cb(err);\n    });\n  });\n  return p;\n};\n\nBlake2b.prototype.ready = Blake2b.ready;\n\nfunction noop() {}\n\nfunction hexSlice(buf, start, len) {\n  var str = '';\n\n  for (var i = 0; i < len; i++) str += toHex(buf[start + i]);\n\n  return str;\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}","map":{"version":3,"names":["assert","require","wasm","head","freeList","module","exports","Blake2b","BYTES_MIN","BYTES_MAX","BYTES","KEYBYTES_MIN","KEYBYTES_MAX","KEYBYTES","SALTBYTES","PERSONALBYTES","digestLength","key","salt","personal","noAssert","Error","length","push","finalized","pointer","pop","memory","fill","set","realloc","blake2b_init","update","prototype","input","blake2b_update","digest","enc","blake2b_final","slice","hexSlice","i","final","WASM","buffer","SUPPORTED","WebAssembly","ready","cb","noop","p","Promise","reject","resolve","onload","err","buf","start","len","str","toHex","n","toString"],"sources":["C:/Users/acer/node_modules/blake2b-wasm/index.js"],"sourcesContent":["var assert = require('nanoassert')\nvar wasm = require('./blake2b')()\n\nvar head = 64\nvar freeList = []\n\nmodule.exports = Blake2b\nvar BYTES_MIN = module.exports.BYTES_MIN = 16\nvar BYTES_MAX = module.exports.BYTES_MAX = 64\nvar BYTES = module.exports.BYTES = 32\nvar KEYBYTES_MIN = module.exports.KEYBYTES_MIN = 16\nvar KEYBYTES_MAX = module.exports.KEYBYTES_MAX = 64\nvar KEYBYTES = module.exports.KEYBYTES = 32\nvar SALTBYTES = module.exports.SALTBYTES = 16\nvar PERSONALBYTES = module.exports.PERSONALBYTES = 16\n\nfunction Blake2b (digestLength, key, salt, personal, noAssert) {\n  if (!(this instanceof Blake2b)) return new Blake2b(digestLength, key, salt, personal, noAssert)\n  if (!(wasm && wasm.exports)) throw new Error('WASM not loaded. Wait for Blake2b.ready(cb)')\n  if (!digestLength) digestLength = 32\n\n  if (noAssert !== true) {\n    assert(digestLength >= BYTES_MIN, 'digestLength must be at least ' + BYTES_MIN + ', was given ' + digestLength)\n    assert(digestLength <= BYTES_MAX, 'digestLength must be at most ' + BYTES_MAX + ', was given ' + digestLength)\n    if (key != null) assert(key.length >= KEYBYTES_MIN, 'key must be at least ' + KEYBYTES_MIN + ', was given ' + key.length)\n    if (key != null) assert(key.length <= KEYBYTES_MAX, 'key must be at least ' + KEYBYTES_MAX + ', was given ' + key.length)\n    if (salt != null) assert(salt.length === SALTBYTES, 'salt must be exactly ' + SALTBYTES + ', was given ' + salt.length)\n    if (personal != null) assert(personal.length === PERSONALBYTES, 'personal must be exactly ' + PERSONALBYTES + ', was given ' + personal.length)\n  }\n\n  if (!freeList.length) {\n    freeList.push(head)\n    head += 216\n  }\n\n  this.digestLength = digestLength\n  this.finalized = false\n  this.pointer = freeList.pop()\n\n  wasm.memory.fill(0, 0, 64)\n  wasm.memory[0] = this.digestLength\n  wasm.memory[1] = key ? key.length : 0\n  wasm.memory[2] = 1 // fanout\n  wasm.memory[3] = 1 // depth\n\n  if (salt) wasm.memory.set(salt, 32)\n  if (personal) wasm.memory.set(personal, 48)\n\n  if (this.pointer + 216 > wasm.memory.length) wasm.realloc(this.pointer + 216) // we need 216 bytes for the state\n  wasm.exports.blake2b_init(this.pointer, this.digestLength)\n\n  if (key) {\n    this.update(key)\n    wasm.memory.fill(0, head, head + key.length) // whiteout key\n    wasm.memory[this.pointer + 200] = 128\n  }\n}\n\n\nBlake2b.prototype.update = function (input) {\n  assert(this.finalized === false, 'Hash instance finalized')\n  assert(input, 'input must be TypedArray or Buffer')\n\n  if (head + input.length > wasm.memory.length) wasm.realloc(head + input.length)\n  wasm.memory.set(input, head)\n  wasm.exports.blake2b_update(this.pointer, head, head + input.length)\n  return this\n}\n\nBlake2b.prototype.digest = function (enc) {\n  assert(this.finalized === false, 'Hash instance finalized')\n  this.finalized = true\n\n  freeList.push(this.pointer)\n  wasm.exports.blake2b_final(this.pointer)\n\n  if (!enc || enc === 'binary') {\n    return wasm.memory.slice(this.pointer + 128, this.pointer + 128 + this.digestLength)\n  }\n\n  if (enc === 'hex') {\n    return hexSlice(wasm.memory, this.pointer + 128, this.digestLength)\n  }\n\n  assert(enc.length >= this.digestLength, 'input must be TypedArray or Buffer')\n  for (var i = 0; i < this.digestLength; i++) {\n    enc[i] = wasm.memory[this.pointer + 128 + i]\n  }\n\n  return enc\n}\n\n// libsodium compat\nBlake2b.prototype.final = Blake2b.prototype.digest\n\nBlake2b.WASM = wasm && wasm.buffer\nBlake2b.SUPPORTED = typeof WebAssembly !== 'undefined'\n\nBlake2b.ready = function (cb) {\n  if (!cb) cb = noop\n  if (!wasm) return cb(new Error('WebAssembly not supported'))\n\n  // backwards compat, can be removed in a new major\n  var p = new Promise(function (reject, resolve) {\n    wasm.onload(function (err) {\n      if (err) resolve()\n      else reject()\n      cb(err)\n    })\n  })\n\n  return p\n}\n\nBlake2b.prototype.ready = Blake2b.ready\n\nfunction noop () {}\n\nfunction hexSlice (buf, start, len) {\n  var str = ''\n  for (var i = 0; i < len; i++) str += toHex(buf[start + i])\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}