{"ast":null,"code":"'use strict';\n\nvar _ = require('lodash');\n\nvar BN = require('../crypto/bn');\n\nvar BufferUtil = require('../util/buffer');\n\nvar BufferReader = require('../encoding/bufferreader');\n\nvar BufferWriter = require('../encoding/bufferwriter');\n\nvar Hash = require('../crypto/hash');\n\nvar JSUtil = require('../util/js');\n\nvar $ = require('../util/preconditions');\n\nvar Script = require('../script');\n\nvar GENESIS_BITS = 0x1d00ffff;\n/**\n * Instantiate a BlockHeader from a Buffer, JSON object, or Object with\n * the properties of the BlockHeader\n *\n * @param {*} - A Buffer, JSON string, or Object\n * @returns {BlockHeader} - An instance of block header\n * @constructor\n */\n\nvar BlockHeader = function BlockHeader(arg) {\n  if (!(this instanceof BlockHeader)) {\n    return new BlockHeader(arg);\n  }\n\n  var info = BlockHeader._from(arg);\n\n  this.version = info.version;\n  this.prevHash = info.prevHash;\n  this.merkleRoot = info.merkleRoot;\n  this.time = info.time;\n  this.timestamp = info.time;\n  this.bits = info.bits;\n  this.nonce = info.nonce;\n\n  if (info.hash) {\n    $.checkState(this.hash === info.hash, 'Argument object hash property does not match block hash.');\n  }\n\n  return this;\n};\n/**\n * @param {*} - A Buffer, JSON string or Object\n * @returns {Object} - An object representing block header data\n * @throws {TypeError} - If the argument was not recognized\n * @private\n */\n\n\nBlockHeader._from = function _from(arg) {\n  var info = {};\n\n  if (BufferUtil.isBuffer(arg)) {\n    info = BlockHeader._fromBufferReader(BufferReader(arg));\n  } else if (_.isObject(arg)) {\n    info = BlockHeader._fromObject(arg);\n  } else {\n    throw new TypeError('Unrecognized argument for BlockHeader');\n  }\n\n  return info;\n};\n/**\n * @param {Object} - A JSON string\n * @returns {Object} - An object representing block header data\n * @private\n */\n\n\nBlockHeader._fromObject = function _fromObject(data) {\n  $.checkArgument(data, 'data is required');\n  var prevHash = data.prevHash;\n  var merkleRoot = data.merkleRoot;\n\n  if (_.isString(data.prevHash)) {\n    prevHash = BufferUtil.reverse(Buffer.from(data.prevHash, 'hex'));\n  }\n\n  if (_.isString(data.merkleRoot)) {\n    merkleRoot = BufferUtil.reverse(Buffer.from(data.merkleRoot, 'hex'));\n  }\n\n  var info = {\n    hash: data.hash,\n    version: data.version,\n    prevHash: prevHash,\n    merkleRoot: merkleRoot,\n    time: data.time,\n    timestamp: data.time,\n    bits: data.bits,\n    nonce: data.nonce\n  };\n  return info;\n};\n/**\n * @param {Object} - A plain JavaScript object\n * @returns {BlockHeader} - An instance of block header\n */\n\n\nBlockHeader.fromObject = function fromObject(obj) {\n  var info = BlockHeader._fromObject(obj);\n\n  return new BlockHeader(info);\n};\n/**\n * @param {Binary} - Raw block binary data or buffer\n * @returns {BlockHeader} - An instance of block header\n */\n\n\nBlockHeader.fromRawBlock = function fromRawBlock(data) {\n  if (!BufferUtil.isBuffer(data)) {\n    data = Buffer.from(data, 'binary');\n  }\n\n  var br = BufferReader(data);\n  br.pos = BlockHeader.Constants.START_OF_HEADER;\n\n  var info = BlockHeader._fromBufferReader(br);\n\n  return new BlockHeader(info);\n};\n/**\n * @param {Buffer} - A buffer of the block header\n * @returns {BlockHeader} - An instance of block header\n */\n\n\nBlockHeader.fromBuffer = function fromBuffer(buf) {\n  var info = BlockHeader._fromBufferReader(BufferReader(buf));\n\n  return new BlockHeader(info);\n};\n/**\n * @param {string} - A hex encoded buffer of the block header\n * @returns {BlockHeader} - An instance of block header\n */\n\n\nBlockHeader.fromString = function fromString(str) {\n  var buf = Buffer.from(str, 'hex');\n  return BlockHeader.fromBuffer(buf);\n};\n/**\n * @param {BufferReader} - A BufferReader of the block header\n * @returns {Object} - An object representing block header data\n * @private\n */\n\n\nBlockHeader._fromBufferReader = function _fromBufferReader(br) {\n  var info = {};\n  info.version = br.readInt32LE();\n  info.prevHash = br.read(32);\n  info.merkleRoot = br.read(32);\n  info.time = br.readUInt32LE();\n  info.bits = br.readUInt32LE();\n  info.nonce = br.readUInt32LE();\n  return info;\n};\n/**\n * @param {BufferReader} - A BufferReader of the block header\n * @returns {BlockHeader} - An instance of block header\n */\n\n\nBlockHeader.fromBufferReader = function fromBufferReader(br) {\n  var info = BlockHeader._fromBufferReader(br);\n\n  const header = new BlockHeader(info);\n\n  header._parseAuxPoW(br);\n\n  return header;\n};\n/**\n * @returns {Object} - A plain object of the BlockHeader\n */\n\n\nBlockHeader.prototype.toObject = BlockHeader.prototype.toJSON = function toObject() {\n  return {\n    hash: this.hash,\n    version: this.version,\n    prevHash: BufferUtil.reverse(this.prevHash).toString('hex'),\n    merkleRoot: BufferUtil.reverse(this.merkleRoot).toString('hex'),\n    time: this.time,\n    bits: this.bits,\n    nonce: this.nonce\n  };\n};\n/**\n * @returns {Buffer} - A Buffer of the BlockHeader\n */\n\n\nBlockHeader.prototype.toBuffer = function toBuffer() {\n  return this.toBufferWriter().concat();\n};\n/**\n * @returns {string} - A hex encoded string of the BlockHeader\n */\n\n\nBlockHeader.prototype.toString = function toString() {\n  return this.toBuffer().toString('hex');\n};\n/**\n * @param {BufferWriter} - An existing instance BufferWriter\n * @returns {BufferWriter} - An instance of BufferWriter representation of the BlockHeader\n */\n\n\nBlockHeader.prototype.toBufferWriter = function toBufferWriter(bw) {\n  if (!bw) {\n    bw = new BufferWriter();\n  }\n\n  bw.writeInt32LE(this.version);\n  bw.write(this.prevHash);\n  bw.write(this.merkleRoot);\n  bw.writeUInt32LE(this.time);\n  bw.writeUInt32LE(this.bits);\n  bw.writeUInt32LE(this.nonce);\n  return bw;\n};\n/**\n * Returns the target difficulty for this block\n * @param {Number} bits\n * @returns {BN} An instance of BN with the decoded difficulty bits\n */\n\n\nBlockHeader.prototype.getTargetDifficulty = function getTargetDifficulty(bits) {\n  bits = bits || this.bits;\n  var target = new BN(bits & 0xffffff);\n  var mov = 8 * ((bits >>> 24) - 3);\n\n  while (mov-- > 0) {\n    target = target.mul(new BN(2));\n  }\n\n  return target;\n};\n/**\n * @link https://en.bitcoin.it/wiki/Difficulty\n * @return {Number}\n */\n\n\nBlockHeader.prototype.getDifficulty = function getDifficulty() {\n  var difficulty1TargetBN = this.getTargetDifficulty(GENESIS_BITS).mul(new BN(Math.pow(10, 8)));\n  var currentTargetBN = this.getTargetDifficulty();\n  var difficultyString = difficulty1TargetBN.div(currentTargetBN).toString(10);\n  var decimalPos = difficultyString.length - 8;\n  difficultyString = difficultyString.slice(0, decimalPos) + '.' + difficultyString.slice(decimalPos);\n  return parseFloat(difficultyString);\n};\n/**\n * @returns {Buffer} - The little endian hash buffer of the header\n */\n\n\nBlockHeader.prototype._getHash = function hash() {\n  var buf = this.toBuffer();\n  return Hash.sha256sha256(buf);\n};\n\nvar idProperty = {\n  configurable: false,\n  enumerable: true,\n\n  /**\n   * @returns {string} - The big endian hash buffer of the header\n   */\n  get: function () {\n    if (!this._id) {\n      this._id = BufferReader(this._getHash()).readReverse().toString('hex');\n    }\n\n    return this._id;\n  },\n  set: _.noop\n};\nObject.defineProperty(BlockHeader.prototype, 'id', idProperty);\nObject.defineProperty(BlockHeader.prototype, 'hash', idProperty);\n/**\n * @returns {Boolean} - If timestamp is not too far in the future\n */\n\nBlockHeader.prototype.validTimestamp = function validTimestamp() {\n  var currentTime = Math.round(new Date().getTime() / 1000);\n\n  if (this.time > currentTime + BlockHeader.Constants.MAX_TIME_OFFSET) {\n    return false;\n  }\n\n  return true;\n};\n/**\n * @returns {Boolean} - If the proof-of-work hash satisfies the target difficulty\n */\n\n\nBlockHeader.prototype.validProofOfWork = function validProofOfWork() {\n  // For Litecoin, we use the scrypt hash to calculate proof of work\n  var pow = new BN(Hash.scrypt(this.toBuffer()));\n  var target = this.getTargetDifficulty();\n\n  if (pow.cmp(target) > 0) {\n    return false;\n  }\n\n  return true;\n};\n/**\n * @returns {string} - A string formatted for the console\n */\n\n\nBlockHeader.prototype.inspect = function inspect() {\n  return '<BlockHeader ' + this.id + '>';\n};\n/**\n * Parse the Aux Proof-of-Work block in the block header\n * Ref: https://en.bitcoin.it/wiki/Merged_mining_specification#Aux_proof-of-work_block\n * @param {BufferReader} br - BufferReader containing the header\n */\n\n\nBlockHeader.prototype._parseAuxPoW = function (br) {\n  // Reference for AuxPoW bit:\n  // https://github.com/dogecoin/dogecoin/blob/0b46a40ed125d7bf4b5a485b91350bc8bdc48fc8/src/primitives/pureheader.h#L131\n  if (!(this.version & 1 << 8)) {\n    return this;\n  } // Coinbase Txn\n\n\n  const getTxn = () => {\n    const version = br.readInt32LE(); // If flag is 1, then has witness(es) (see below)\n\n    let flag = 0;\n\n    if (br.buf.readUInt16BE(br.pos) === 1) {\n      flag = br.readUInt16BE();\n    } // Tx_ins\n\n\n    const getTxIn = () => {\n      const prevOutput = {\n        hash: br.read(32),\n        index: br.read(4)\n      };\n      const scriptLen = br.readVarintNum();\n      const script = br.read(scriptLen);\n      const sequence = br.readUInt32LE();\n      return {\n        prevOutput,\n        scriptLen,\n        script,\n        sequence\n      };\n    };\n\n    const txInCount = br.readVarintNum();\n    const txIn = [];\n\n    for (let i = 0; i < txInCount; i++) {\n      txIn.push(getTxIn());\n    } // Tx_outs\n\n\n    const getTxOut = () => {\n      const value = br.read(8);\n      const pkScriptLen = br.readVarintNum();\n      const pkScript = br.read(pkScriptLen);\n      return {\n        value,\n        scriptLen: pkScriptLen,\n        script: new Script(pkScript)\n      };\n    };\n\n    const txOutCount = br.readVarintNum();\n    const txOut = [];\n\n    for (let i = 0; i < txOutCount; i++) {\n      txOut.push(getTxOut());\n    } // Tx_witnesses\n\n\n    const txWitnesses = [];\n\n    if (flag) {\n      for (let i = 0; i < txInCount; i++) {\n        const componentCnt = br.readVarintNum();\n\n        for (let j = 0; j < componentCnt; j++) {\n          const componentLen = br.readVarintNum();\n          txWitnesses.push(br.read(componentLen));\n        }\n      }\n    } // Locktime\n\n\n    const lockTime = br.readUInt32LE();\n    return {\n      version,\n      flag,\n      txInCount,\n      txIn,\n      txOutCount,\n      txOut,\n      txWitnesses,\n      lockTime\n    };\n  }; // Could possibly use Transaction().fromBufferReader(br), but it's throwing due to bnNum instanceof BN === false ??\n\n\n  const coinbaseTxn = getTxn();\n  const blockHash = br.read(32);\n\n  const merkleBranch = () => {\n    const branchLen = br.readVarintNum();\n    const branchHashes = [];\n\n    for (let j = 0; j < branchLen; j++) {\n      branchHashes.push(br.readReverse(32));\n    }\n\n    const branchSideMask = br.readInt32LE();\n    return {\n      branchLen,\n      branchHashes,\n      branchSideMask\n    };\n  };\n\n  const coinbaseBranch = merkleBranch();\n  const blockchainBranch = merkleBranch();\n  let parentBlock = br.read(80);\n  parentBlock = new BlockHeader(parentBlock);\n  this.auxpow = {\n    coinbaseTxn,\n    blockHash,\n    coinbaseBranch,\n    blockchainBranch,\n    parentBlock\n  };\n  return this;\n};\n\nBlockHeader.Constants = {\n  START_OF_HEADER: 8,\n  // Start buffer position in raw block data\n  MAX_TIME_OFFSET: 2 * 60 * 60,\n  // The max a timestamp can be in the future\n  LARGEST_HASH: new BN('10000000000000000000000000000000000000000000000000000000000000000', 'hex')\n};\nmodule.exports = BlockHeader;","map":{"version":3,"names":["_","require","BN","BufferUtil","BufferReader","BufferWriter","Hash","JSUtil","$","Script","GENESIS_BITS","BlockHeader","arg","info","_from","version","prevHash","merkleRoot","time","timestamp","bits","nonce","hash","checkState","isBuffer","_fromBufferReader","isObject","_fromObject","TypeError","data","checkArgument","isString","reverse","Buffer","from","fromObject","obj","fromRawBlock","br","pos","Constants","START_OF_HEADER","fromBuffer","buf","fromString","str","readInt32LE","read","readUInt32LE","fromBufferReader","header","_parseAuxPoW","prototype","toObject","toJSON","toString","toBuffer","toBufferWriter","concat","bw","writeInt32LE","write","writeUInt32LE","getTargetDifficulty","target","mov","mul","getDifficulty","difficulty1TargetBN","Math","pow","currentTargetBN","difficultyString","div","decimalPos","length","slice","parseFloat","_getHash","sha256sha256","idProperty","configurable","enumerable","get","_id","readReverse","set","noop","Object","defineProperty","validTimestamp","currentTime","round","Date","getTime","MAX_TIME_OFFSET","validProofOfWork","scrypt","cmp","inspect","id","getTxn","flag","readUInt16BE","getTxIn","prevOutput","index","scriptLen","readVarintNum","script","sequence","txInCount","txIn","i","push","getTxOut","value","pkScriptLen","pkScript","txOutCount","txOut","txWitnesses","componentCnt","j","componentLen","lockTime","coinbaseTxn","blockHash","merkleBranch","branchLen","branchHashes","branchSideMask","coinbaseBranch","blockchainBranch","parentBlock","auxpow","LARGEST_HASH","module","exports"],"sources":["C:/Users/acer/node_modules/bitcore-lib-doge/lib/block/blockheader.js"],"sourcesContent":["'use strict';\n\nvar _ = require('lodash');\nvar BN = require('../crypto/bn');\nvar BufferUtil = require('../util/buffer');\nvar BufferReader = require('../encoding/bufferreader');\nvar BufferWriter = require('../encoding/bufferwriter');\nvar Hash = require('../crypto/hash');\nvar JSUtil = require('../util/js');\nvar $ = require('../util/preconditions');\nvar Script = require('../script');\n\nvar GENESIS_BITS = 0x1d00ffff;\n\n/**\n * Instantiate a BlockHeader from a Buffer, JSON object, or Object with\n * the properties of the BlockHeader\n *\n * @param {*} - A Buffer, JSON string, or Object\n * @returns {BlockHeader} - An instance of block header\n * @constructor\n */\nvar BlockHeader = function BlockHeader(arg) {\n  if (!(this instanceof BlockHeader)) {\n    return new BlockHeader(arg);\n  }\n  var info = BlockHeader._from(arg);\n  this.version = info.version;\n  this.prevHash = info.prevHash;\n  this.merkleRoot = info.merkleRoot;\n  this.time = info.time;\n  this.timestamp = info.time;\n  this.bits = info.bits;\n  this.nonce = info.nonce;\n\n  if (info.hash) {\n    $.checkState(\n      this.hash === info.hash,\n      'Argument object hash property does not match block hash.'\n    );\n  }\n\n  return this;\n};\n\n/**\n * @param {*} - A Buffer, JSON string or Object\n * @returns {Object} - An object representing block header data\n * @throws {TypeError} - If the argument was not recognized\n * @private\n */\nBlockHeader._from = function _from(arg) {\n  var info = {};\n  if (BufferUtil.isBuffer(arg)) {\n    info = BlockHeader._fromBufferReader(BufferReader(arg));\n  } else if (_.isObject(arg)) {\n    info = BlockHeader._fromObject(arg);\n  } else {\n    throw new TypeError('Unrecognized argument for BlockHeader');\n  }\n  return info;\n};\n\n/**\n * @param {Object} - A JSON string\n * @returns {Object} - An object representing block header data\n * @private\n */\nBlockHeader._fromObject = function _fromObject(data) {\n  $.checkArgument(data, 'data is required');\n  var prevHash = data.prevHash;\n  var merkleRoot = data.merkleRoot;\n  if (_.isString(data.prevHash)) {\n    prevHash = BufferUtil.reverse(Buffer.from(data.prevHash, 'hex'));\n  }\n  if (_.isString(data.merkleRoot)) {\n    merkleRoot = BufferUtil.reverse(Buffer.from(data.merkleRoot, 'hex'));\n  }\n  var info = {\n    hash: data.hash,\n    version: data.version,\n    prevHash: prevHash,\n    merkleRoot: merkleRoot,\n    time: data.time,\n    timestamp: data.time,\n    bits: data.bits,\n    nonce: data.nonce\n  };\n  return info;\n};\n\n/**\n * @param {Object} - A plain JavaScript object\n * @returns {BlockHeader} - An instance of block header\n */\nBlockHeader.fromObject = function fromObject(obj) {\n  var info = BlockHeader._fromObject(obj);\n  return new BlockHeader(info);\n};\n\n/**\n * @param {Binary} - Raw block binary data or buffer\n * @returns {BlockHeader} - An instance of block header\n */\nBlockHeader.fromRawBlock = function fromRawBlock(data) {\n  if (!BufferUtil.isBuffer(data)) {\n    data = Buffer.from(data, 'binary');\n  }\n  var br = BufferReader(data);\n  br.pos = BlockHeader.Constants.START_OF_HEADER;\n  var info = BlockHeader._fromBufferReader(br);\n  return new BlockHeader(info);\n};\n\n/**\n * @param {Buffer} - A buffer of the block header\n * @returns {BlockHeader} - An instance of block header\n */\nBlockHeader.fromBuffer = function fromBuffer(buf) {\n  var info = BlockHeader._fromBufferReader(BufferReader(buf));\n  return new BlockHeader(info);\n};\n\n/**\n * @param {string} - A hex encoded buffer of the block header\n * @returns {BlockHeader} - An instance of block header\n */\nBlockHeader.fromString = function fromString(str) {\n  var buf = Buffer.from(str, 'hex');\n  return BlockHeader.fromBuffer(buf);\n};\n\n/**\n * @param {BufferReader} - A BufferReader of the block header\n * @returns {Object} - An object representing block header data\n * @private\n */\nBlockHeader._fromBufferReader = function _fromBufferReader(br) {\n  var info = {};\n  info.version = br.readInt32LE();\n  info.prevHash = br.read(32);\n  info.merkleRoot = br.read(32);\n  info.time = br.readUInt32LE();\n  info.bits = br.readUInt32LE();\n  info.nonce = br.readUInt32LE();\n  return info;\n};\n\n/**\n * @param {BufferReader} - A BufferReader of the block header\n * @returns {BlockHeader} - An instance of block header\n */\nBlockHeader.fromBufferReader = function fromBufferReader(br) {\n  var info = BlockHeader._fromBufferReader(br);\n  const header = new BlockHeader(info);\n  header._parseAuxPoW(br);\n  return header;\n};\n\n/**\n * @returns {Object} - A plain object of the BlockHeader\n */\nBlockHeader.prototype.toObject = BlockHeader.prototype.toJSON = function toObject() {\n  return {\n    hash: this.hash,\n    version: this.version,\n    prevHash: BufferUtil.reverse(this.prevHash).toString('hex'),\n    merkleRoot: BufferUtil.reverse(this.merkleRoot).toString('hex'),\n    time: this.time,\n    bits: this.bits,\n    nonce: this.nonce\n  };\n};\n\n/**\n * @returns {Buffer} - A Buffer of the BlockHeader\n */\nBlockHeader.prototype.toBuffer = function toBuffer() {\n  return this.toBufferWriter().concat();\n};\n\n/**\n * @returns {string} - A hex encoded string of the BlockHeader\n */\nBlockHeader.prototype.toString = function toString() {\n  return this.toBuffer().toString('hex');\n};\n\n/**\n * @param {BufferWriter} - An existing instance BufferWriter\n * @returns {BufferWriter} - An instance of BufferWriter representation of the BlockHeader\n */\nBlockHeader.prototype.toBufferWriter = function toBufferWriter(bw) {\n  if (!bw) {\n    bw = new BufferWriter();\n  }\n  bw.writeInt32LE(this.version);\n  bw.write(this.prevHash);\n  bw.write(this.merkleRoot);\n  bw.writeUInt32LE(this.time);\n  bw.writeUInt32LE(this.bits);\n  bw.writeUInt32LE(this.nonce);\n  return bw;\n};\n\n/**\n * Returns the target difficulty for this block\n * @param {Number} bits\n * @returns {BN} An instance of BN with the decoded difficulty bits\n */\nBlockHeader.prototype.getTargetDifficulty = function getTargetDifficulty(bits) {\n  bits = bits || this.bits;\n\n  var target = new BN(bits & 0xffffff);\n  var mov = 8 * ((bits >>> 24) - 3);\n  while (mov-- > 0) {\n    target = target.mul(new BN(2));\n  }\n  return target;\n};\n\n/**\n * @link https://en.bitcoin.it/wiki/Difficulty\n * @return {Number}\n */\nBlockHeader.prototype.getDifficulty = function getDifficulty() {\n  var difficulty1TargetBN = this.getTargetDifficulty(GENESIS_BITS).mul(new BN(Math.pow(10, 8)));\n  var currentTargetBN = this.getTargetDifficulty();\n\n  var difficultyString = difficulty1TargetBN.div(currentTargetBN).toString(10);\n  var decimalPos = difficultyString.length - 8;\n  difficultyString = difficultyString.slice(0, decimalPos) + '.' + difficultyString.slice(decimalPos);\n\n  return parseFloat(difficultyString);\n};\n\n/**\n * @returns {Buffer} - The little endian hash buffer of the header\n */\nBlockHeader.prototype._getHash = function hash() {\n  var buf = this.toBuffer();\n  return Hash.sha256sha256(buf);\n};\n\nvar idProperty = {\n  configurable: false,\n  enumerable: true,\n  /**\n   * @returns {string} - The big endian hash buffer of the header\n   */\n  get: function() {\n    if (!this._id) {\n      this._id = BufferReader(this._getHash()).readReverse().toString('hex');\n    }\n    return this._id;\n  },\n  set: _.noop\n};\nObject.defineProperty(BlockHeader.prototype, 'id', idProperty);\nObject.defineProperty(BlockHeader.prototype, 'hash', idProperty);\n\n/**\n * @returns {Boolean} - If timestamp is not too far in the future\n */\nBlockHeader.prototype.validTimestamp = function validTimestamp() {\n  var currentTime = Math.round(new Date().getTime() / 1000);\n  if (this.time > currentTime + BlockHeader.Constants.MAX_TIME_OFFSET) {\n    return false;\n  }\n  return true;\n};\n\n/**\n * @returns {Boolean} - If the proof-of-work hash satisfies the target difficulty\n */\nBlockHeader.prototype.validProofOfWork = function validProofOfWork() {\n  // For Litecoin, we use the scrypt hash to calculate proof of work\n  var pow = new BN(Hash.scrypt(this.toBuffer()));\n  var target = this.getTargetDifficulty();\n\n  if (pow.cmp(target) > 0) {\n    return false;\n  }\n  return true;\n};\n\n/**\n * @returns {string} - A string formatted for the console\n */\nBlockHeader.prototype.inspect = function inspect() {\n  return '<BlockHeader ' + this.id + '>';\n};\n\n\n/**\n * Parse the Aux Proof-of-Work block in the block header\n * Ref: https://en.bitcoin.it/wiki/Merged_mining_specification#Aux_proof-of-work_block\n * @param {BufferReader} br - BufferReader containing the header\n */\nBlockHeader.prototype._parseAuxPoW = function(br) {\n  // Reference for AuxPoW bit:\n  // https://github.com/dogecoin/dogecoin/blob/0b46a40ed125d7bf4b5a485b91350bc8bdc48fc8/src/primitives/pureheader.h#L131\n  if (!(this.version & 1 << 8)) {\n    return this;\n  }\n\n  // Coinbase Txn\n  const getTxn = () => {\n    const version = br.readInt32LE();\n    // If flag is 1, then has witness(es) (see below)\n    let flag = 0;\n    if (br.buf.readUInt16BE(br.pos) === 1) {\n      flag = br.readUInt16BE();\n    }\n    // Tx_ins\n    const getTxIn = () => {\n      const prevOutput = {\n        hash: br.read(32),\n        index: br.read(4)\n      };\n      const scriptLen = br.readVarintNum();\n      const script = br.read(scriptLen);\n      const sequence = br.readUInt32LE();\n      return {\n        prevOutput,\n        scriptLen,\n        script,\n        sequence\n      }\n    }\n    const txInCount = br.readVarintNum();\n    const txIn = [];\n    for (let i = 0; i < txInCount; i++) {\n      txIn.push(getTxIn());\n    }\n    // Tx_outs\n    const getTxOut = () => {\n      const value = br.read(8);\n      const pkScriptLen = br.readVarintNum();\n      const pkScript = br.read(pkScriptLen);\n      return {\n        value,\n        scriptLen: pkScriptLen,\n        script: new Script(pkScript)\n      }\n    }\n    const txOutCount = br.readVarintNum();\n    const txOut = [];\n    for (let i = 0; i < txOutCount; i++) {\n      txOut.push(getTxOut());\n    }\n    // Tx_witnesses\n    const txWitnesses = [];\n    if (flag) {\n      for (let i = 0; i < txInCount; i++) {\n        const componentCnt = br.readVarintNum();\n        for (let j = 0; j < componentCnt; j++) {\n          const componentLen = br.readVarintNum();\n          txWitnesses.push(br.read(componentLen));\n        }\n      }\n    }\n    // Locktime\n    const lockTime = br.readUInt32LE();\n    return {\n      version,\n      flag,\n      txInCount,\n      txIn,\n      txOutCount,\n      txOut,\n      txWitnesses,\n      lockTime\n    }\n  };\n  \n  // Could possibly use Transaction().fromBufferReader(br), but it's throwing due to bnNum instanceof BN === false ??\n  const coinbaseTxn = getTxn();\n  const blockHash = br.read(32);\n  \n  const merkleBranch = () => {\n    const branchLen = br.readVarintNum();\n    const branchHashes = [];\n    for (let j = 0; j < branchLen; j++) {\n      branchHashes.push(br.readReverse(32));\n    }\n    const branchSideMask = br.readInt32LE();\n    return {\n      branchLen,\n      branchHashes,\n      branchSideMask\n    }\n  };\n  \n  const coinbaseBranch = merkleBranch();\n  const blockchainBranch = merkleBranch();\n  let parentBlock = br.read(80);\n  parentBlock = new BlockHeader(parentBlock);\n\n  this.auxpow = {\n    coinbaseTxn,\n    blockHash,\n    coinbaseBranch,\n    blockchainBranch,\n    parentBlock\n  }\n  \n  return this;\n}\n\nBlockHeader.Constants = {\n  START_OF_HEADER: 8, // Start buffer position in raw block data\n  MAX_TIME_OFFSET: 2 * 60 * 60, // The max a timestamp can be in the future\n  LARGEST_HASH: new BN('10000000000000000000000000000000000000000000000000000000000000000', 'hex')\n};\n\nmodule.exports = BlockHeader;\n"],"mappings":"AAAA;;AAEA,IAAIA,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAf;;AACA,IAAIC,EAAE,GAAGD,OAAO,CAAC,cAAD,CAAhB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,gBAAD,CAAxB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,0BAAD,CAA1B;;AACA,IAAII,YAAY,GAAGJ,OAAO,CAAC,0BAAD,CAA1B;;AACA,IAAIK,IAAI,GAAGL,OAAO,CAAC,gBAAD,CAAlB;;AACA,IAAIM,MAAM,GAAGN,OAAO,CAAC,YAAD,CAApB;;AACA,IAAIO,CAAC,GAAGP,OAAO,CAAC,uBAAD,CAAf;;AACA,IAAIQ,MAAM,GAAGR,OAAO,CAAC,WAAD,CAApB;;AAEA,IAAIS,YAAY,GAAG,UAAnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,GAArB,EAA0B;EAC1C,IAAI,EAAE,gBAAgBD,WAAlB,CAAJ,EAAoC;IAClC,OAAO,IAAIA,WAAJ,CAAgBC,GAAhB,CAAP;EACD;;EACD,IAAIC,IAAI,GAAGF,WAAW,CAACG,KAAZ,CAAkBF,GAAlB,CAAX;;EACA,KAAKG,OAAL,GAAeF,IAAI,CAACE,OAApB;EACA,KAAKC,QAAL,GAAgBH,IAAI,CAACG,QAArB;EACA,KAAKC,UAAL,GAAkBJ,IAAI,CAACI,UAAvB;EACA,KAAKC,IAAL,GAAYL,IAAI,CAACK,IAAjB;EACA,KAAKC,SAAL,GAAiBN,IAAI,CAACK,IAAtB;EACA,KAAKE,IAAL,GAAYP,IAAI,CAACO,IAAjB;EACA,KAAKC,KAAL,GAAaR,IAAI,CAACQ,KAAlB;;EAEA,IAAIR,IAAI,CAACS,IAAT,EAAe;IACbd,CAAC,CAACe,UAAF,CACE,KAAKD,IAAL,KAAcT,IAAI,CAACS,IADrB,EAEE,0DAFF;EAID;;EAED,OAAO,IAAP;AACD,CArBD;AAuBA;AACA;AACA;AACA;AACA;AACA;;;AACAX,WAAW,CAACG,KAAZ,GAAoB,SAASA,KAAT,CAAeF,GAAf,EAAoB;EACtC,IAAIC,IAAI,GAAG,EAAX;;EACA,IAAIV,UAAU,CAACqB,QAAX,CAAoBZ,GAApB,CAAJ,EAA8B;IAC5BC,IAAI,GAAGF,WAAW,CAACc,iBAAZ,CAA8BrB,YAAY,CAACQ,GAAD,CAA1C,CAAP;EACD,CAFD,MAEO,IAAIZ,CAAC,CAAC0B,QAAF,CAAWd,GAAX,CAAJ,EAAqB;IAC1BC,IAAI,GAAGF,WAAW,CAACgB,WAAZ,CAAwBf,GAAxB,CAAP;EACD,CAFM,MAEA;IACL,MAAM,IAAIgB,SAAJ,CAAc,uCAAd,CAAN;EACD;;EACD,OAAOf,IAAP;AACD,CAVD;AAYA;AACA;AACA;AACA;AACA;;;AACAF,WAAW,CAACgB,WAAZ,GAA0B,SAASA,WAAT,CAAqBE,IAArB,EAA2B;EACnDrB,CAAC,CAACsB,aAAF,CAAgBD,IAAhB,EAAsB,kBAAtB;EACA,IAAIb,QAAQ,GAAGa,IAAI,CAACb,QAApB;EACA,IAAIC,UAAU,GAAGY,IAAI,CAACZ,UAAtB;;EACA,IAAIjB,CAAC,CAAC+B,QAAF,CAAWF,IAAI,CAACb,QAAhB,CAAJ,EAA+B;IAC7BA,QAAQ,GAAGb,UAAU,CAAC6B,OAAX,CAAmBC,MAAM,CAACC,IAAP,CAAYL,IAAI,CAACb,QAAjB,EAA2B,KAA3B,CAAnB,CAAX;EACD;;EACD,IAAIhB,CAAC,CAAC+B,QAAF,CAAWF,IAAI,CAACZ,UAAhB,CAAJ,EAAiC;IAC/BA,UAAU,GAAGd,UAAU,CAAC6B,OAAX,CAAmBC,MAAM,CAACC,IAAP,CAAYL,IAAI,CAACZ,UAAjB,EAA6B,KAA7B,CAAnB,CAAb;EACD;;EACD,IAAIJ,IAAI,GAAG;IACTS,IAAI,EAAEO,IAAI,CAACP,IADF;IAETP,OAAO,EAAEc,IAAI,CAACd,OAFL;IAGTC,QAAQ,EAAEA,QAHD;IAITC,UAAU,EAAEA,UAJH;IAKTC,IAAI,EAAEW,IAAI,CAACX,IALF;IAMTC,SAAS,EAAEU,IAAI,CAACX,IANP;IAOTE,IAAI,EAAES,IAAI,CAACT,IAPF;IAQTC,KAAK,EAAEQ,IAAI,CAACR;EARH,CAAX;EAUA,OAAOR,IAAP;AACD,CArBD;AAuBA;AACA;AACA;AACA;;;AACAF,WAAW,CAACwB,UAAZ,GAAyB,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EAChD,IAAIvB,IAAI,GAAGF,WAAW,CAACgB,WAAZ,CAAwBS,GAAxB,CAAX;;EACA,OAAO,IAAIzB,WAAJ,CAAgBE,IAAhB,CAAP;AACD,CAHD;AAKA;AACA;AACA;AACA;;;AACAF,WAAW,CAAC0B,YAAZ,GAA2B,SAASA,YAAT,CAAsBR,IAAtB,EAA4B;EACrD,IAAI,CAAC1B,UAAU,CAACqB,QAAX,CAAoBK,IAApB,CAAL,EAAgC;IAC9BA,IAAI,GAAGI,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkB,QAAlB,CAAP;EACD;;EACD,IAAIS,EAAE,GAAGlC,YAAY,CAACyB,IAAD,CAArB;EACAS,EAAE,CAACC,GAAH,GAAS5B,WAAW,CAAC6B,SAAZ,CAAsBC,eAA/B;;EACA,IAAI5B,IAAI,GAAGF,WAAW,CAACc,iBAAZ,CAA8Ba,EAA9B,CAAX;;EACA,OAAO,IAAI3B,WAAJ,CAAgBE,IAAhB,CAAP;AACD,CARD;AAUA;AACA;AACA;AACA;;;AACAF,WAAW,CAAC+B,UAAZ,GAAyB,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EAChD,IAAI9B,IAAI,GAAGF,WAAW,CAACc,iBAAZ,CAA8BrB,YAAY,CAACuC,GAAD,CAA1C,CAAX;;EACA,OAAO,IAAIhC,WAAJ,CAAgBE,IAAhB,CAAP;AACD,CAHD;AAKA;AACA;AACA;AACA;;;AACAF,WAAW,CAACiC,UAAZ,GAAyB,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EAChD,IAAIF,GAAG,GAAGV,MAAM,CAACC,IAAP,CAAYW,GAAZ,EAAiB,KAAjB,CAAV;EACA,OAAOlC,WAAW,CAAC+B,UAAZ,CAAuBC,GAAvB,CAAP;AACD,CAHD;AAKA;AACA;AACA;AACA;AACA;;;AACAhC,WAAW,CAACc,iBAAZ,GAAgC,SAASA,iBAAT,CAA2Ba,EAA3B,EAA+B;EAC7D,IAAIzB,IAAI,GAAG,EAAX;EACAA,IAAI,CAACE,OAAL,GAAeuB,EAAE,CAACQ,WAAH,EAAf;EACAjC,IAAI,CAACG,QAAL,GAAgBsB,EAAE,CAACS,IAAH,CAAQ,EAAR,CAAhB;EACAlC,IAAI,CAACI,UAAL,GAAkBqB,EAAE,CAACS,IAAH,CAAQ,EAAR,CAAlB;EACAlC,IAAI,CAACK,IAAL,GAAYoB,EAAE,CAACU,YAAH,EAAZ;EACAnC,IAAI,CAACO,IAAL,GAAYkB,EAAE,CAACU,YAAH,EAAZ;EACAnC,IAAI,CAACQ,KAAL,GAAaiB,EAAE,CAACU,YAAH,EAAb;EACA,OAAOnC,IAAP;AACD,CATD;AAWA;AACA;AACA;AACA;;;AACAF,WAAW,CAACsC,gBAAZ,GAA+B,SAASA,gBAAT,CAA0BX,EAA1B,EAA8B;EAC3D,IAAIzB,IAAI,GAAGF,WAAW,CAACc,iBAAZ,CAA8Ba,EAA9B,CAAX;;EACA,MAAMY,MAAM,GAAG,IAAIvC,WAAJ,CAAgBE,IAAhB,CAAf;;EACAqC,MAAM,CAACC,YAAP,CAAoBb,EAApB;;EACA,OAAOY,MAAP;AACD,CALD;AAOA;AACA;AACA;;;AACAvC,WAAW,CAACyC,SAAZ,CAAsBC,QAAtB,GAAiC1C,WAAW,CAACyC,SAAZ,CAAsBE,MAAtB,GAA+B,SAASD,QAAT,GAAoB;EAClF,OAAO;IACL/B,IAAI,EAAE,KAAKA,IADN;IAELP,OAAO,EAAE,KAAKA,OAFT;IAGLC,QAAQ,EAAEb,UAAU,CAAC6B,OAAX,CAAmB,KAAKhB,QAAxB,EAAkCuC,QAAlC,CAA2C,KAA3C,CAHL;IAILtC,UAAU,EAAEd,UAAU,CAAC6B,OAAX,CAAmB,KAAKf,UAAxB,EAAoCsC,QAApC,CAA6C,KAA7C,CAJP;IAKLrC,IAAI,EAAE,KAAKA,IALN;IAMLE,IAAI,EAAE,KAAKA,IANN;IAOLC,KAAK,EAAE,KAAKA;EAPP,CAAP;AASD,CAVD;AAYA;AACA;AACA;;;AACAV,WAAW,CAACyC,SAAZ,CAAsBI,QAAtB,GAAiC,SAASA,QAAT,GAAoB;EACnD,OAAO,KAAKC,cAAL,GAAsBC,MAAtB,EAAP;AACD,CAFD;AAIA;AACA;AACA;;;AACA/C,WAAW,CAACyC,SAAZ,CAAsBG,QAAtB,GAAiC,SAASA,QAAT,GAAoB;EACnD,OAAO,KAAKC,QAAL,GAAgBD,QAAhB,CAAyB,KAAzB,CAAP;AACD,CAFD;AAIA;AACA;AACA;AACA;;;AACA5C,WAAW,CAACyC,SAAZ,CAAsBK,cAAtB,GAAuC,SAASA,cAAT,CAAwBE,EAAxB,EAA4B;EACjE,IAAI,CAACA,EAAL,EAAS;IACPA,EAAE,GAAG,IAAItD,YAAJ,EAAL;EACD;;EACDsD,EAAE,CAACC,YAAH,CAAgB,KAAK7C,OAArB;EACA4C,EAAE,CAACE,KAAH,CAAS,KAAK7C,QAAd;EACA2C,EAAE,CAACE,KAAH,CAAS,KAAK5C,UAAd;EACA0C,EAAE,CAACG,aAAH,CAAiB,KAAK5C,IAAtB;EACAyC,EAAE,CAACG,aAAH,CAAiB,KAAK1C,IAAtB;EACAuC,EAAE,CAACG,aAAH,CAAiB,KAAKzC,KAAtB;EACA,OAAOsC,EAAP;AACD,CAXD;AAaA;AACA;AACA;AACA;AACA;;;AACAhD,WAAW,CAACyC,SAAZ,CAAsBW,mBAAtB,GAA4C,SAASA,mBAAT,CAA6B3C,IAA7B,EAAmC;EAC7EA,IAAI,GAAGA,IAAI,IAAI,KAAKA,IAApB;EAEA,IAAI4C,MAAM,GAAG,IAAI9D,EAAJ,CAAOkB,IAAI,GAAG,QAAd,CAAb;EACA,IAAI6C,GAAG,GAAG,KAAK,CAAC7C,IAAI,KAAK,EAAV,IAAgB,CAArB,CAAV;;EACA,OAAO6C,GAAG,KAAK,CAAf,EAAkB;IAChBD,MAAM,GAAGA,MAAM,CAACE,GAAP,CAAW,IAAIhE,EAAJ,CAAO,CAAP,CAAX,CAAT;EACD;;EACD,OAAO8D,MAAP;AACD,CATD;AAWA;AACA;AACA;AACA;;;AACArD,WAAW,CAACyC,SAAZ,CAAsBe,aAAtB,GAAsC,SAASA,aAAT,GAAyB;EAC7D,IAAIC,mBAAmB,GAAG,KAAKL,mBAAL,CAAyBrD,YAAzB,EAAuCwD,GAAvC,CAA2C,IAAIhE,EAAJ,CAAOmE,IAAI,CAACC,GAAL,CAAS,EAAT,EAAa,CAAb,CAAP,CAA3C,CAA1B;EACA,IAAIC,eAAe,GAAG,KAAKR,mBAAL,EAAtB;EAEA,IAAIS,gBAAgB,GAAGJ,mBAAmB,CAACK,GAApB,CAAwBF,eAAxB,EAAyChB,QAAzC,CAAkD,EAAlD,CAAvB;EACA,IAAImB,UAAU,GAAGF,gBAAgB,CAACG,MAAjB,GAA0B,CAA3C;EACAH,gBAAgB,GAAGA,gBAAgB,CAACI,KAAjB,CAAuB,CAAvB,EAA0BF,UAA1B,IAAwC,GAAxC,GAA8CF,gBAAgB,CAACI,KAAjB,CAAuBF,UAAvB,CAAjE;EAEA,OAAOG,UAAU,CAACL,gBAAD,CAAjB;AACD,CATD;AAWA;AACA;AACA;;;AACA7D,WAAW,CAACyC,SAAZ,CAAsB0B,QAAtB,GAAiC,SAASxD,IAAT,GAAgB;EAC/C,IAAIqB,GAAG,GAAG,KAAKa,QAAL,EAAV;EACA,OAAOlD,IAAI,CAACyE,YAAL,CAAkBpC,GAAlB,CAAP;AACD,CAHD;;AAKA,IAAIqC,UAAU,GAAG;EACfC,YAAY,EAAE,KADC;EAEfC,UAAU,EAAE,IAFG;;EAGf;AACF;AACA;EACEC,GAAG,EAAE,YAAW;IACd,IAAI,CAAC,KAAKC,GAAV,EAAe;MACb,KAAKA,GAAL,GAAWhF,YAAY,CAAC,KAAK0E,QAAL,EAAD,CAAZ,CAA8BO,WAA9B,GAA4C9B,QAA5C,CAAqD,KAArD,CAAX;IACD;;IACD,OAAO,KAAK6B,GAAZ;EACD,CAXc;EAYfE,GAAG,EAAEtF,CAAC,CAACuF;AAZQ,CAAjB;AAcAC,MAAM,CAACC,cAAP,CAAsB9E,WAAW,CAACyC,SAAlC,EAA6C,IAA7C,EAAmD4B,UAAnD;AACAQ,MAAM,CAACC,cAAP,CAAsB9E,WAAW,CAACyC,SAAlC,EAA6C,MAA7C,EAAqD4B,UAArD;AAEA;AACA;AACA;;AACArE,WAAW,CAACyC,SAAZ,CAAsBsC,cAAtB,GAAuC,SAASA,cAAT,GAA0B;EAC/D,IAAIC,WAAW,GAAGtB,IAAI,CAACuB,KAAL,CAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAAlC,CAAlB;;EACA,IAAI,KAAK5E,IAAL,GAAYyE,WAAW,GAAGhF,WAAW,CAAC6B,SAAZ,CAAsBuD,eAApD,EAAqE;IACnE,OAAO,KAAP;EACD;;EACD,OAAO,IAAP;AACD,CAND;AAQA;AACA;AACA;;;AACApF,WAAW,CAACyC,SAAZ,CAAsB4C,gBAAtB,GAAyC,SAASA,gBAAT,GAA4B;EACnE;EACA,IAAI1B,GAAG,GAAG,IAAIpE,EAAJ,CAAOI,IAAI,CAAC2F,MAAL,CAAY,KAAKzC,QAAL,EAAZ,CAAP,CAAV;EACA,IAAIQ,MAAM,GAAG,KAAKD,mBAAL,EAAb;;EAEA,IAAIO,GAAG,CAAC4B,GAAJ,CAAQlC,MAAR,IAAkB,CAAtB,EAAyB;IACvB,OAAO,KAAP;EACD;;EACD,OAAO,IAAP;AACD,CATD;AAWA;AACA;AACA;;;AACArD,WAAW,CAACyC,SAAZ,CAAsB+C,OAAtB,GAAgC,SAASA,OAAT,GAAmB;EACjD,OAAO,kBAAkB,KAAKC,EAAvB,GAA4B,GAAnC;AACD,CAFD;AAKA;AACA;AACA;AACA;AACA;;;AACAzF,WAAW,CAACyC,SAAZ,CAAsBD,YAAtB,GAAqC,UAASb,EAAT,EAAa;EAChD;EACA;EACA,IAAI,EAAE,KAAKvB,OAAL,GAAe,KAAK,CAAtB,CAAJ,EAA8B;IAC5B,OAAO,IAAP;EACD,CAL+C,CAOhD;;;EACA,MAAMsF,MAAM,GAAG,MAAM;IACnB,MAAMtF,OAAO,GAAGuB,EAAE,CAACQ,WAAH,EAAhB,CADmB,CAEnB;;IACA,IAAIwD,IAAI,GAAG,CAAX;;IACA,IAAIhE,EAAE,CAACK,GAAH,CAAO4D,YAAP,CAAoBjE,EAAE,CAACC,GAAvB,MAAgC,CAApC,EAAuC;MACrC+D,IAAI,GAAGhE,EAAE,CAACiE,YAAH,EAAP;IACD,CANkB,CAOnB;;;IACA,MAAMC,OAAO,GAAG,MAAM;MACpB,MAAMC,UAAU,GAAG;QACjBnF,IAAI,EAAEgB,EAAE,CAACS,IAAH,CAAQ,EAAR,CADW;QAEjB2D,KAAK,EAAEpE,EAAE,CAACS,IAAH,CAAQ,CAAR;MAFU,CAAnB;MAIA,MAAM4D,SAAS,GAAGrE,EAAE,CAACsE,aAAH,EAAlB;MACA,MAAMC,MAAM,GAAGvE,EAAE,CAACS,IAAH,CAAQ4D,SAAR,CAAf;MACA,MAAMG,QAAQ,GAAGxE,EAAE,CAACU,YAAH,EAAjB;MACA,OAAO;QACLyD,UADK;QAELE,SAFK;QAGLE,MAHK;QAILC;MAJK,CAAP;IAMD,CAdD;;IAeA,MAAMC,SAAS,GAAGzE,EAAE,CAACsE,aAAH,EAAlB;IACA,MAAMI,IAAI,GAAG,EAAb;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAApB,EAA+BE,CAAC,EAAhC,EAAoC;MAClCD,IAAI,CAACE,IAAL,CAAUV,OAAO,EAAjB;IACD,CA3BkB,CA4BnB;;;IACA,MAAMW,QAAQ,GAAG,MAAM;MACrB,MAAMC,KAAK,GAAG9E,EAAE,CAACS,IAAH,CAAQ,CAAR,CAAd;MACA,MAAMsE,WAAW,GAAG/E,EAAE,CAACsE,aAAH,EAApB;MACA,MAAMU,QAAQ,GAAGhF,EAAE,CAACS,IAAH,CAAQsE,WAAR,CAAjB;MACA,OAAO;QACLD,KADK;QAELT,SAAS,EAAEU,WAFN;QAGLR,MAAM,EAAE,IAAIpG,MAAJ,CAAW6G,QAAX;MAHH,CAAP;IAKD,CATD;;IAUA,MAAMC,UAAU,GAAGjF,EAAE,CAACsE,aAAH,EAAnB;IACA,MAAMY,KAAK,GAAG,EAAd;;IACA,KAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,UAApB,EAAgCN,CAAC,EAAjC,EAAqC;MACnCO,KAAK,CAACN,IAAN,CAAWC,QAAQ,EAAnB;IACD,CA3CkB,CA4CnB;;;IACA,MAAMM,WAAW,GAAG,EAApB;;IACA,IAAInB,IAAJ,EAAU;MACR,KAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAApB,EAA+BE,CAAC,EAAhC,EAAoC;QAClC,MAAMS,YAAY,GAAGpF,EAAE,CAACsE,aAAH,EAArB;;QACA,KAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAApB,EAAkCC,CAAC,EAAnC,EAAuC;UACrC,MAAMC,YAAY,GAAGtF,EAAE,CAACsE,aAAH,EAArB;UACAa,WAAW,CAACP,IAAZ,CAAiB5E,EAAE,CAACS,IAAH,CAAQ6E,YAAR,CAAjB;QACD;MACF;IACF,CAtDkB,CAuDnB;;;IACA,MAAMC,QAAQ,GAAGvF,EAAE,CAACU,YAAH,EAAjB;IACA,OAAO;MACLjC,OADK;MAELuF,IAFK;MAGLS,SAHK;MAILC,IAJK;MAKLO,UALK;MAMLC,KANK;MAOLC,WAPK;MAQLI;IARK,CAAP;EAUD,CAnED,CARgD,CA6EhD;;;EACA,MAAMC,WAAW,GAAGzB,MAAM,EAA1B;EACA,MAAM0B,SAAS,GAAGzF,EAAE,CAACS,IAAH,CAAQ,EAAR,CAAlB;;EAEA,MAAMiF,YAAY,GAAG,MAAM;IACzB,MAAMC,SAAS,GAAG3F,EAAE,CAACsE,aAAH,EAAlB;IACA,MAAMsB,YAAY,GAAG,EAArB;;IACA,KAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,SAApB,EAA+BN,CAAC,EAAhC,EAAoC;MAClCO,YAAY,CAAChB,IAAb,CAAkB5E,EAAE,CAAC+C,WAAH,CAAe,EAAf,CAAlB;IACD;;IACD,MAAM8C,cAAc,GAAG7F,EAAE,CAACQ,WAAH,EAAvB;IACA,OAAO;MACLmF,SADK;MAELC,YAFK;MAGLC;IAHK,CAAP;EAKD,CAZD;;EAcA,MAAMC,cAAc,GAAGJ,YAAY,EAAnC;EACA,MAAMK,gBAAgB,GAAGL,YAAY,EAArC;EACA,IAAIM,WAAW,GAAGhG,EAAE,CAACS,IAAH,CAAQ,EAAR,CAAlB;EACAuF,WAAW,GAAG,IAAI3H,WAAJ,CAAgB2H,WAAhB,CAAd;EAEA,KAAKC,MAAL,GAAc;IACZT,WADY;IAEZC,SAFY;IAGZK,cAHY;IAIZC,gBAJY;IAKZC;EALY,CAAd;EAQA,OAAO,IAAP;AACD,CA7GD;;AA+GA3H,WAAW,CAAC6B,SAAZ,GAAwB;EACtBC,eAAe,EAAE,CADK;EACF;EACpBsD,eAAe,EAAE,IAAI,EAAJ,GAAS,EAFJ;EAEQ;EAC9ByC,YAAY,EAAE,IAAItI,EAAJ,CAAO,mEAAP,EAA4E,KAA5E;AAHQ,CAAxB;AAMAuI,MAAM,CAACC,OAAP,GAAiB/H,WAAjB"},"metadata":{},"sourceType":"script"}