{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst common_1 = require(\"../../common\");\n\nconst AccountFields = common_1.constants.AccountFields;\n\nfunction parseField(info, value) {\n  if (info.encoding === 'hex' && !info.length) {\n    return Buffer.from(value, 'hex').toString('ascii');\n  }\n\n  if (info.shift) {\n    return new bignumber_js_1.default(value).shiftedBy(-info.shift).toNumber();\n  }\n\n  return value;\n}\n\nfunction parseFields(data) {\n  const settings = {};\n\n  for (const fieldName in AccountFields) {\n    const fieldValue = data[fieldName];\n\n    if (fieldValue != null) {\n      const info = AccountFields[fieldName];\n      settings[info.name] = parseField(info, fieldValue);\n    }\n  }\n\n  if (data.RegularKey) {\n    settings.regularKey = data.RegularKey;\n  }\n\n  if (data.signer_lists && data.signer_lists.length === 1) {\n    settings.signers = {};\n\n    if (data.signer_lists[0].SignerQuorum) {\n      settings.signers.threshold = data.signer_lists[0].SignerQuorum;\n    }\n\n    if (data.signer_lists[0].SignerEntries) {\n      settings.signers.weights = data.signer_lists[0].SignerEntries.map(entry => {\n        return {\n          address: entry.SignerEntry.Account,\n          weight: entry.SignerEntry.SignerWeight\n        };\n      });\n    }\n  }\n\n  return settings;\n}\n\nexports.default = parseFields;","map":{"version":3,"mappings":";;;;;;;;;;;;AACA;;AACA;;AACA,MAAMA,aAAa,GAAGC,mBAAUD,aAAhC;;AAEA,SAASE,UAAT,CAAoBC,IAApB,EAA0BC,KAA1B,EAA+B;EAC7B,IAAID,IAAI,CAACE,QAAL,KAAkB,KAAlB,IAA2B,CAACF,IAAI,CAACG,MAArC,EAA6C;IAE3C,OAAOC,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmB,KAAnB,EAA0BK,QAA1B,CAAmC,OAAnC,CAAP;EACD;;EACD,IAAIN,IAAI,CAACO,KAAT,EAAgB;IACd,OAAO,IAAIC,sBAAJ,CAAcP,KAAd,EAAqBQ,SAArB,CAA+B,CAACT,IAAI,CAACO,KAArC,EAA4CG,QAA5C,EAAP;EACD;;EACD,OAAOT,KAAP;AACD;;AAED,SAASU,WAAT,CAAqBC,IAArB,EAA8B;EAC5B,MAAMC,QAAQ,GAAQ,EAAtB;;EACA,KAAK,MAAMC,SAAX,IAAwBjB,aAAxB,EAAuC;IACrC,MAAMkB,UAAU,GAAGH,IAAI,CAACE,SAAD,CAAvB;;IACA,IAAIC,UAAU,IAAI,IAAlB,EAAwB;MACtB,MAAMf,IAAI,GAAGH,aAAa,CAACiB,SAAD,CAA1B;MACAD,QAAQ,CAACb,IAAI,CAACgB,IAAN,CAAR,GAAsBjB,UAAU,CAACC,IAAD,EAAOe,UAAP,CAAhC;IACD;EACF;;EAED,IAAIH,IAAI,CAACK,UAAT,EAAqB;IACnBJ,QAAQ,CAACK,UAAT,GAAsBN,IAAI,CAACK,UAA3B;EACD;;EAID,IAAIL,IAAI,CAACO,YAAL,IAAqBP,IAAI,CAACO,YAAL,CAAkBhB,MAAlB,KAA6B,CAAtD,EAAyD;IACvDU,QAAQ,CAACO,OAAT,GAAmB,EAAnB;;IACA,IAAIR,IAAI,CAACO,YAAL,CAAkB,CAAlB,EAAqBE,YAAzB,EAAuC;MACrCR,QAAQ,CAACO,OAAT,CAAiBE,SAAjB,GAA6BV,IAAI,CAACO,YAAL,CAAkB,CAAlB,EAAqBE,YAAlD;IACD;;IACD,IAAIT,IAAI,CAACO,YAAL,CAAkB,CAAlB,EAAqBI,aAAzB,EAAwC;MACtCV,QAAQ,CAACO,OAAT,CAAiBI,OAAjB,GAA2BZ,IAAI,CAACO,YAAL,CAAkB,CAAlB,EAAqBI,aAArB,CAAmCE,GAAnC,CACxBC,KAAD,IAAe;QACb,OAAO;UACLC,OAAO,EAAED,KAAK,CAACE,WAAN,CAAkBC,OADtB;UAELC,MAAM,EAAEJ,KAAK,CAACE,WAAN,CAAkBG;QAFrB,CAAP;MAID,CANwB,CAA3B;IAQD;EACF;;EACD,OAAOlB,QAAP;AACD;;AAEDmB,kBAAerB,WAAf","names":["AccountFields","common_1","parseField","info","value","encoding","length","Buffer","from","toString","shift","bignumber_js_1","shiftedBy","toNumber","parseFields","data","settings","fieldName","fieldValue","name","RegularKey","regularKey","signer_lists","signers","SignerQuorum","threshold","SignerEntries","weights","map","entry","address","SignerEntry","Account","weight","SignerWeight","exports"],"sourceRoot":"","sources":["../../../../src/ledger/parse/fields.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}