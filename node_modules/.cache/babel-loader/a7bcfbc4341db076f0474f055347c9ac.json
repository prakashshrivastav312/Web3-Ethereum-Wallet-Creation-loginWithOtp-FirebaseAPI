{"ast":null,"code":"'use strict';\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RPCMethodMap = void 0;\n\nconst thor_devkit_1 = require(\"thor-devkit\");\n\nconst utils = require(\"../utils\");\n\nconst simple_http_1 = require(\"./simple-http\");\n\nconst debug = require('debug')('thor:http-provider:rpc');\n\nexports.RPCMethodMap = new Map();\n\nconst getRevertReason = returned => {\n  const ErrorStringMatcher = /^0x08c379a0/i;\n  const PanicUint256Matcher = /^0x4e487b71/i;\n\n  try {\n    if (ErrorStringMatcher.test(returned)) {\n      return thor_devkit_1.abi.decodeParameter('string', returned.replace(ErrorStringMatcher, '0x'));\n    }\n\n    if (PanicUint256Matcher.test(returned)) {\n      return `Panic(0x${parseInt(thor_devkit_1.abi.decodeParameter('uint256', returned.replace(PanicUint256Matcher, '0x')), 10).toString(16)})`;\n    }\n\n    return null;\n  } catch (_a) {\n    return null;\n  }\n};\n\nconst HTTPPostProcessor = function (res) {\n  if (res.Code === 0) {\n    return Promise.reject(new Error(`[thor-provider] Invalid response, check the host`));\n  }\n\n  if (res.Code !== 200) {\n    return Promise.reject(new Error(res.Body ? res.Body : '[thor-provider] Invalid response code from provider: ' + res.Code));\n  }\n\n  return Promise.resolve(res.Body);\n};\n\nexports.RPCMethodMap.set('eth_getBlockByNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + utils.fromETHBlockNumber(rpc.params[0]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_blockNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.number);\n  });\n});\nexports.RPCMethodMap.set('eth_getBalance', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.balance);\n  });\n});\nexports.RPCMethodMap.set('eth_getEnergy', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.energy);\n  });\n});\nexports.RPCMethodMap.set('eth_getCode', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/code?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.code);\n  });\n});\nexports.RPCMethodMap.set('eth_getStorageAt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/storage/' + utils.leftPadToBytes32(rpc.params[1]) + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[2]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.value);\n  });\n});\nexports.RPCMethodMap.set('eth_sendRawTransaction', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions';\n    const reqBody = {\n      raw: rpc.params[0]\n    };\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.id);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionReceipt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0] + '/receipt';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    res.blockHash = res.meta.blockID;\n    res.transactionHash = res.meta.txID; // For compatible with ethereum's receipt\n\n    if (res.reverted) {\n      res.status = '0x0';\n    } else {\n      res.status = '0x1';\n    }\n\n    if (res.outputs.length === 1) {\n      res.contractAddress = res.outputs[0].contractAddress;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_call', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts/*' + extraURI;\n    const reqBody = {\n      clauses: [{\n        to: rpc.params[0].to || null,\n        value: rpc.params[0].value || '',\n        data: rpc.params[0].data || '0x'\n      }],\n      gasPrice: rpc.params[0].gasPrice || undefined\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    debug('eth_call returns', res);\n\n    if (!res || res.length === 0) {\n      return rpc.makeResult(null);\n    } else {\n      const result = res[0];\n\n      if (result.reverted || result.vmError) {\n        if (result.data) {\n          const reason = getRevertReason(result.data);\n\n          if (reason) {\n            return rpc.makeError('VM reverted: ' + reason);\n          }\n        }\n\n        return rpc.makeError('VM executing failed' + (result.vmError ? ': ' + result.vmError : ''));\n      } else {\n        return rpc.makeResult(result.data === '0x' ? '' : result.data);\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_estimateGas', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts/*' + extraURI;\n    const reqBody = {\n      clauses: [{\n        to: rpc.params[0].to || null,\n        value: rpc.params[0].value || '',\n        data: rpc.params[0].data || '0x'\n      }],\n      gasPrice: rpc.params[0].gasPrice || undefined\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res || res.length === 0) {\n      return rpc.makeResult(null);\n    } else {\n      const result = res[0];\n\n      if (result.reverted || result.vmError) {\n        if (result.data) {\n          const reason = getRevertReason(result.data);\n\n          if (reason) {\n            return rpc.makeError('Gas estimation failed with VM reverted: ' + reason);\n          }\n        }\n\n        return rpc.makeError('Gas estimation failed' + (result.vmError ? ': ' + result.vmError : ''));\n      } else {\n        debug('VM gas:', result.gasUsed); // ignore the overflow since block gas limit is uint64 and JavaScript's max number is 2^53\n\n        const intrinsicGas = thor_devkit_1.Transaction.intrinsicGas(reqBody.clauses); // increase vm gas by 15000 for safe since it's estimated from current block state, final state for the transaction is not determined for now\n\n        return rpc.makeResult(intrinsicGas + (result.gasUsed ? result.gasUsed + 15000 : 0));\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_getLogs', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const reqBody = utils.formatLogQuery(rpc.params[0]);\n    const URL = host + '/logs/event';\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    for (const item of res) {\n      item.blockNumber = item.meta.blockNumber;\n      item.blockHash = item.meta.blockID;\n      item.transactionHash = item.meta.txID;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockRef', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult(res.id.substr(0, 18));\n  });\n});\nexports.RPCMethodMap.set('eth_getChainTag', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/0';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id || res.id.length !== 66) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult('0x' + res.id.substr(64, 2));\n  });\n});\nexports.RPCMethodMap.set('eth_gasPrice', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return rpc.makeResult('0x1');\n  });\n});","map":{"version":3,"mappings":"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","names":["debug","require","exports","Map","getRevertReason","returned","ErrorStringMatcher","PanicUint256Matcher","test","thor_devkit_1","decodeParameter","replace","parseInt","toString","HTTPPostProcessor","res","Code","Promise","reject","Error","Body","resolve","set","rpc","host","timeout","URL","utils","fromETHBlockNumber","params","simple_http_1","get","then","makeResult","number","fromETHBlockNumberOrHash","balance","energy","code","leftPadToBytes32","value","reqBody","raw","post","id","blockNumber","meta","blockHash","blockID","transactionHash","txID","reverted","status","outputs","length","contractAddress","extraURI","clauses","to","data","gasPrice","undefined","gas","sanitizeHex","from","caller","result","vmError","reason","makeError","gasUsed","intrinsicGas","formatLogQuery","item","substr"],"sourceRoot":"","sources":["../../src/provider/rpc-methods.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}