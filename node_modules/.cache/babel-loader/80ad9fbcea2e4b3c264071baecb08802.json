{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Balance = void 0;\n\nconst bignumber_js_1 = require(\"bignumber.js\");\n\nconst errors_1 = require(\"./errors\");\n\nconst balanceBuilder_1 = require(\"./balanceBuilder\");\n/**\n * The number of decimals handled when working with EGLD or ESDT values.\n */\n\n\nconst DEFAULT_BIGNUMBER_DECIMAL_PLACES = 18;\nbignumber_js_1.BigNumber.set({\n  DECIMAL_PLACES: DEFAULT_BIGNUMBER_DECIMAL_PLACES,\n  ROUNDING_MODE: 1\n});\n/**\n * Balance, as an immutable object.\n */\n\nclass Balance {\n  /**\n   * Creates a Balance object.\n   */\n  constructor(token, nonce, value) {\n    this.nonce = new bignumber_js_1.BigNumber(0);\n    this.value = new bignumber_js_1.BigNumber(0);\n    this.token = token;\n    this.nonce = new bignumber_js_1.BigNumber(nonce);\n    this.value = new bignumber_js_1.BigNumber(value);\n  }\n  /**\n   * Creates a balance object from an EGLD value (denomination will be applied).\n   */\n\n\n  static egld(value) {\n    return balanceBuilder_1.Egld(value);\n  }\n  /**\n   * Creates a balance object from a string (with denomination included).\n   */\n\n\n  static fromString(value) {\n    return balanceBuilder_1.Egld.raw(value || \"0\");\n  }\n  /**\n   * Creates a zero-valued EGLD balance object.\n   */\n\n\n  static Zero() {\n    return balanceBuilder_1.Egld(0);\n  }\n\n  isZero() {\n    return this.value.isZero();\n  }\n\n  isEgld() {\n    return this.token.isEgld();\n  }\n\n  isSet() {\n    return !this.isZero();\n  }\n  /**\n   * Returns the string representation of the value (as EGLD currency).\n   */\n\n\n  toCurrencyString() {\n    return `${this.toDenominated()} ${this.token.getTokenIdentifier()}`;\n  }\n\n  toDenominated() {\n    return this.value.shiftedBy(-this.token.decimals).toFixed(this.token.decimals);\n  }\n  /**\n   * Returns the string representation of the value (its big-integer form).\n   */\n\n\n  toString() {\n    return this.value.toFixed();\n  }\n  /**\n   * Converts the balance to a pretty, plain JavaScript object.\n   */\n\n\n  toJSON() {\n    return {\n      asString: this.toString(),\n      asCurrencyString: this.toCurrencyString()\n    };\n  }\n\n  getNonce() {\n    return this.nonce;\n  }\n\n  valueOf() {\n    return this.value;\n  }\n\n  plus(other) {\n    this.checkSameToken(other);\n    return new Balance(this.token, this.nonce, this.value.plus(other.value));\n  }\n\n  minus(other) {\n    this.checkSameToken(other);\n    return new Balance(this.token, this.nonce, this.value.minus(other.value));\n  }\n\n  times(n) {\n    return new Balance(this.token, this.nonce, this.value.times(n));\n  }\n\n  div(n) {\n    return new Balance(this.token, this.nonce, this.value.div(n));\n  }\n\n  isEqualTo(other) {\n    this.checkSameToken(other);\n    return this.value.isEqualTo(other.value);\n  }\n\n  checkSameToken(other) {\n    if (this.token != other.token) {\n      throw new errors_1.ErrInvalidArgument(\"Different token types\");\n    }\n\n    if (!this.nonce.isEqualTo(other.nonce)) {\n      throw new errors_1.ErrInvalidArgument(\"Different nonces\");\n    }\n  }\n\n}\n\nexports.Balance = Balance;","map":{"version":3,"mappings":"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","names":["DEFAULT_BIGNUMBER_DECIMAL_PLACES","bignumber_js_1","set","DECIMAL_PLACES","ROUNDING_MODE","Balance","constructor","token","nonce","value","egld","balanceBuilder_1","fromString","raw","Zero","isZero","isEgld","isSet","toCurrencyString","toDenominated","getTokenIdentifier","shiftedBy","decimals","toFixed","toString","toJSON","asString","asCurrencyString","getNonce","valueOf","plus","other","checkSameToken","minus","times","n","div","isEqualTo","errors_1","exports"],"sourceRoot":"","sources":["../src/balance.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}