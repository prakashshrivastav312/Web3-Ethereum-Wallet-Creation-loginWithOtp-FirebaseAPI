{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OneOf = void 0;\n\nconst class_validator_1 = require(\"class-validator\"); // eslint-disable-next-line @typescript-eslint/ban-types\n\n\nconst OneOf = (oneOfFields, validationOptions) => (object, propertyName) => {\n  class_validator_1.registerDecorator({\n    name: 'oneOf',\n    target: object.constructor,\n    propertyName,\n    constraints: [oneOfFields],\n    options: validationOptions,\n    validator: {\n      validate(value, args) {\n        let isSet = false;\n\n        for (const oneOfField in args.object) {\n          if (oneOfFields.includes(oneOfField)) {\n            // @ts-ignore\n            if (args.object[oneOfField]) {\n              if (isSet) {\n                return false;\n              }\n\n              isSet = true;\n            }\n          }\n        }\n\n        return isSet;\n      },\n\n      defaultMessage: class_validator_1.buildMessage(() => `Exactly one of ${oneOfFields.join(\", \")} fields can be filled.`, validationOptions)\n    }\n  });\n};\n\nexports.OneOf = OneOf;","map":{"version":3,"mappings":";;;;;;;AAAA,qD,CAEA;;;AACO,MAAMA,KAAK,GAAG,CAACC,WAAD,EAAwBC,iBAAxB,KAAkE,CAACC,MAAD,EAAiBC,YAAjB,KAAyC;EAC5HC,oCAAkB;IACdC,IAAI,EAAE,OADQ;IAEdC,MAAM,EAAEJ,MAAM,CAACK,WAFD;IAGdJ,YAHc;IAIdK,WAAW,EAAE,CAACR,WAAD,CAJC;IAKdS,OAAO,EAAER,iBALK;IAMdS,SAAS,EAAE;MACPC,QAAQ,CAACC,KAAD,EAAaC,IAAb,EAAsC;QAC1C,IAAIC,KAAK,GAAG,KAAZ;;QACA,KAAK,MAAMC,UAAX,IAAyBF,IAAI,CAACX,MAA9B,EAAsC;UAClC,IAAGF,WAAW,CAACgB,QAAZ,CAAqBD,UAArB,CAAH,EAAqC;YACjC;YACA,IAAGF,IAAI,CAACX,MAAL,CAAYa,UAAZ,CAAH,EAA4B;cACxB,IAAGD,KAAH,EAAU;gBACN,OAAO,KAAP;cACH;;cACDA,KAAK,GAAG,IAAR;YACH;UACJ;QACJ;;QACD,OAAOA,KAAP;MACD,CAfI;;MAgBPG,cAAc,EAAEb,+BACZ,MACI,kBAAkBJ,WAAW,CAACkB,IAAZ,CAAiB,IAAjB,CAAsB,wBAFhC,EAGZjB,iBAHY;IAhBT;EANG,CAAlB;AA6BH,CA9BM;;AAAMkB,gBAAKpB,KAAL","names":["OneOf","oneOfFields","validationOptions","object","propertyName","class_validator_1","name","target","constructor","constraints","options","validator","validate","value","args","isSet","oneOfField","includes","defaultMessage","join","exports"],"sourceRoot":"","sources":["../../../../src/model/validation/OneOf.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}