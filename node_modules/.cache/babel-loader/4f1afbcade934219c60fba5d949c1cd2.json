{"ast":null,"code":"var Buffer = require('safe-buffer').Buffer;\n\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  var length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0) throw new Error('Non-minimally encoded script number');\n    }\n  } // 40-bit\n\n\n  if (length === 5) {\n    var a = buffer.readUInt32LE(0);\n    var b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n\n  var result = 0; // 32-bit / 24-bit / 16-bit / 8-bit\n\n  for (var i = 0; i < length; ++i) {\n    result |= buffer[i] << 8 * i;\n  }\n\n  if (buffer[length - 1] & 0x80) return -(result & ~(0x80 << 8 * (length - 1)));\n  return result;\n}\n\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff ? 5 : i > 0x7fffff ? 4 : i > 0x7fff ? 3 : i > 0x7f ? 2 : i > 0x00 ? 1 : 0;\n}\n\nfunction encode(number) {\n  var value = Math.abs(number);\n  var size = scriptNumSize(value);\n  var buffer = Buffer.allocUnsafe(size);\n  var negative = number < 0;\n\n  for (var i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n\n  return buffer;\n}\n\nmodule.exports = {\n  decode: decode,\n  encode: encode\n};","map":{"version":3,"names":["Buffer","require","decode","buffer","maxLength","minimal","undefined","length","TypeError","Error","a","readUInt32LE","b","readUInt8","result","i","scriptNumSize","encode","number","value","Math","abs","size","allocUnsafe","negative","writeUInt8","module","exports"],"sources":["C:/Users/acer/node_modules/@tatumio/bitcoincashjs2-lib/src/script_number.js"],"sourcesContent":["var Buffer = require('safe-buffer').Buffer\n\nfunction decode (buffer, maxLength, minimal) {\n  maxLength = maxLength || 4\n  minimal = minimal === undefined ? true : minimal\n\n  var length = buffer.length\n  if (length === 0) return 0\n  if (length > maxLength) throw new TypeError('Script number overflow')\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0) throw new Error('Non-minimally encoded script number')\n    }\n  }\n\n  // 40-bit\n  if (length === 5) {\n    var a = buffer.readUInt32LE(0)\n    var b = buffer.readUInt8(4)\n\n    if (b & 0x80) return -(((b & ~0x80) * 0x100000000) + a)\n    return (b * 0x100000000) + a\n  }\n\n  var result = 0\n\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  for (var i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i)\n  }\n\n  if (buffer[length - 1] & 0x80) return -(result & ~(0x80 << (8 * (length - 1))))\n  return result\n}\n\nfunction scriptNumSize (i) {\n  return i > 0x7fffffff ? 5\n    : i > 0x7fffff ? 4\n      : i > 0x7fff ? 3\n        : i > 0x7f ? 2\n          : i > 0x00 ? 1\n            : 0\n}\n\nfunction encode (number) {\n  var value = Math.abs(number)\n  var size = scriptNumSize(value)\n  var buffer = Buffer.allocUnsafe(size)\n  var negative = number < 0\n\n  for (var i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i)\n    value >>= 8\n  }\n\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1)\n  } else if (negative) {\n    buffer[size - 1] |= 0x80\n  }\n\n  return buffer\n}\n\nmodule.exports = {\n  decode: decode,\n  encode: encode\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}