{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\n\nconst typeExpressionParser_1 = require(\"./typeExpressionParser\");\n\nconst NamePlaceholder = \"?\";\nconst DescriptionPlaceholder = \"N / A\";\n\nclass EndpointDefinition {\n  constructor(name, input, output, modifiers) {\n    this.input = [];\n    this.output = [];\n    this.name = name;\n    this.input = input || [];\n    this.output = output || [];\n    this.modifiers = modifiers;\n  }\n\n  isConstructor() {\n    return this.name == \"constructor\";\n  }\n\n  static fromJSON(json) {\n    json.name = json.name == null ? NamePlaceholder : json.name;\n    json.payableInTokens = json.payableInTokens || [];\n    json.inputs = json.inputs || [];\n    json.outputs = json.outputs || [];\n    let input = json.inputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let output = json.outputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let modifiers = new EndpointModifiers(json.storageModifier, json.payableInTokens);\n    return new EndpointDefinition(json.name, input, output, modifiers);\n  }\n\n}\n\nexports.EndpointDefinition = EndpointDefinition;\n\nclass EndpointModifiers {\n  constructor(storageModifier, payableInTokens) {\n    this.storageModifier = storageModifier || \"\";\n    this.payableInTokens = payableInTokens || [];\n  }\n\n  isPayableInEGLD() {\n    return this.isPayableInToken(\"EGLD\");\n  }\n\n  isPayableInToken(token) {\n    if (this.payableInTokens.includes(token)) {\n      return true;\n    }\n\n    if (this.payableInTokens.includes(`!${token}`)) {\n      return false;\n    }\n\n    if (this.payableInTokens.includes(\"*\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  isPayable() {\n    return this.payableInTokens.length != 0;\n  }\n\n  isReadonly() {\n    return this.storageModifier == \"readonly\";\n  }\n\n}\n\nexports.EndpointModifiers = EndpointModifiers;\n\nclass EndpointParameterDefinition {\n  constructor(name, description, type) {\n    this.name = name;\n    this.description = description;\n    this.type = type;\n  }\n\n  static fromJSON(json) {\n    let parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\n    return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\n  }\n\n}\n\nexports.EndpointParameterDefinition = EndpointParameterDefinition;","map":{"version":3,"mappings":"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","names":["NamePlaceholder","DescriptionPlaceholder","EndpointDefinition","constructor","name","input","output","modifiers","isConstructor","fromJSON","json","payableInTokens","inputs","outputs","map","param","EndpointParameterDefinition","EndpointModifiers","storageModifier","exports","isPayableInEGLD","isPayableInToken","token","includes","isPayable","length","isReadonly","description","type","parsedType","typeExpressionParser_1","parse"],"sourceRoot":"","sources":["../../../src/smartcontracts/typesystem/endpoint.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}